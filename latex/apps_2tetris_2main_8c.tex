\doxysection{apps/tetris/main.c File Reference}
\hypertarget{apps_2tetris_2main_8c}{}\label{apps_2tetris_2main_8c}\index{apps/tetris/main.c@{apps/tetris/main.c}}


Tetris game for the OS.  


{\ttfamily \#include $<$std.\+h$>$}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structPiece}{Piece}}
\item 
struct \mbox{\hyperlink{structPieceData}{Piece\+Data}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{apps_2tetris_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}{FIELD\+\_\+\+WIDTH}}~10
\item 
\#define \mbox{\hyperlink{apps_2tetris_2main_8c_a90b3ddaf01d4c39af0567b4500e9c4c6}{FIELD\+\_\+\+HEIGHT}}~20
\item 
\#define \mbox{\hyperlink{apps_2tetris_2main_8c_a49d2668adfdf4f710a6c58fdbc0bcbe6}{FIELD\+\_\+\+SIZE}}~(\mbox{\hyperlink{apps_2snake_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}{FIELD\+\_\+\+WIDTH}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{apps_2snake_2main_8c_a90b3ddaf01d4c39af0567b4500e9c4c6}{FIELD\+\_\+\+HEIGHT}})
\item 
\#define \mbox{\hyperlink{apps_2tetris_2main_8c_ad51ded0bbd705f02f73fc60c0b721ced}{BLOCK\+\_\+\+SIZE}}~20
\item 
\#define \mbox{\hyperlink{apps_2tetris_2main_8c_a8dd63073e02e2b072414b6bf3cdf57d6}{FALL\+\_\+\+SPEED\+\_\+\+DEFAULT}}~200
\item 
\#define \mbox{\hyperlink{apps_2tetris_2main_8c_aa4b7f297dae8ab980841cd5ecdb93ee8}{FALL\+\_\+\+SPEED\+\_\+\+FAST}}~30
\item 
\#define \mbox{\hyperlink{apps_2tetris_2main_8c_a799b04d03f49612e3e636b56c3972b80}{STATUS\+\_\+\+RUNNING}}~1
\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef \mbox{\hyperlink{types_8h_a92c50087ca0e64fa93fc59402c55f8ca}{u8}} \mbox{\hyperlink{apps_2tetris_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19}{Field\+Type}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{apps_2tetris_2main_8c_a12ed9719bbdf7bc596ff7a6f4bf3f021}{Piece\+Type}} \{ \newline
{\bfseries I}
, {\bfseries J}
, {\bfseries L}
, {\bfseries O}
, \newline
{\bfseries S}
, {\bfseries T}
, {\bfseries Z}
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}} \mbox{\hyperlink{apps_2tetris_2main_8c_a7c2806ca944c2472b5e1d9234fc6fce7}{\+\_\+field\+\_\+get}} (\mbox{\hyperlink{apps_2snake_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19}{Field\+Type}} \texorpdfstring{$\ast$}{*}field, \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}} x, \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}} y)
\begin{DoxyCompactList}\small\item\em Get the piece at a position inside a field. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{apps_2tetris_2main_8c_a6859d50f3303a4d278f0e97438fa1854}{\+\_\+field\+\_\+shift}} (\mbox{\hyperlink{apps_2snake_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19}{Field\+Type}} \texorpdfstring{$\ast$}{*}field, \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}} row)
\begin{DoxyCompactList}\small\item\em Clear a row and shift down rows above. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}} \mbox{\hyperlink{apps_2tetris_2main_8c_adf863a16219a55882b73716b8ee2b8b8}{\+\_\+field\+\_\+rows}} (\mbox{\hyperlink{apps_2snake_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19}{Field\+Type}} \texorpdfstring{$\ast$}{*}field)
\begin{DoxyCompactList}\small\item\em Remove full rows and update score. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{apps_2tetris_2main_8c_a63512b1efd6d377245329f587094f300}{\+\_\+draw\+\_\+grid}} (void)
\begin{DoxyCompactList}\small\item\em Draw field grid. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{apps_2snake_2main_8c_a12ed9719bbdf7bc596ff7a6f4bf3f021}{Piece\+Type}} \mbox{\hyperlink{apps_2tetris_2main_8c_a8fe5892e2d197c0c60dfaaa2559f64ae}{\+\_\+new\+\_\+piece}} (\mbox{\hyperlink{structPiece}{Piece}} \texorpdfstring{$\ast$}{*}p)
\begin{DoxyCompactList}\small\item\em Get the next random tetris piece. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{apps_2tetris_2main_8c_afa6a85d7ceaf4d7c8e3b17881258b6e3}{\+\_\+valid\+\_\+position}} (\mbox{\hyperlink{apps_2snake_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19}{Field\+Type}} \texorpdfstring{$\ast$}{*}field, \mbox{\hyperlink{structPiece}{Piece}} \texorpdfstring{$\ast$}{*}p)
\begin{DoxyCompactList}\small\item\em Check if the position of a piece is valid, meaning that it is not outside of the frame and not colliding with pieces on the field. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{apps_2tetris_2main_8c_a179f7e3f493ed0a3bdf1bc11907e8c98}{\+\_\+to\+\_\+field}} (\mbox{\hyperlink{apps_2snake_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19}{Field\+Type}} \texorpdfstring{$\ast$}{*}field, \mbox{\hyperlink{structPiece}{Piece}} \texorpdfstring{$\ast$}{*}p)
\begin{DoxyCompactList}\small\item\em Place a piece into a field. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{apps_2tetris_2main_8c_ade05f2059114427e9bcbc708760f5da3}{\+\_\+draw\+\_\+field}} (void)
\begin{DoxyCompactList}\small\item\em Draw the tetris field to the screen. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{apps_2tetris_2main_8c_af5305db9ea018cc40d167b2a51d77ac1}{event\+\_\+key}} (\mbox{\hyperlink{keyboard-shared_8h_a48752551c4279f8cddf3585f8272092a}{Key}} key, \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}} chr, \mbox{\hyperlink{keyboard-shared_8h_a7e51438e5f6bf556512ce7103cddac09}{Key\+State}} state)
\begin{DoxyCompactList}\small\item\em Main key event handler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{apps_2tetris_2main_8c_a7dfd9b79bc5a37d7df40207afbc5431f}{setup}} (void)
\begin{DoxyCompactList}\small\item\em Main setup function, initialize game. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{apps_2tetris_2main_8c_a0b33edabd7f1c4e4a0bf32c67269be2f}{loop}} (void)
\begin{DoxyCompactList}\small\item\em Main game loop, update state. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const \mbox{\hyperlink{structPieceData}{Piece\+Data}} \mbox{\hyperlink{apps_2tetris_2main_8c_a975dd0ea903eaee5b01dc8fa1f03cc21}{Pieces}} \mbox{[}$\,$\mbox{]}
\item 
static \mbox{\hyperlink{structPiece}{Piece}} \mbox{\hyperlink{apps_2tetris_2main_8c_a484db87782841a7763d17ef82d344de1}{\+\_\+cp}}
\item 
static \mbox{\hyperlink{structPiece}{Piece}} \mbox{\hyperlink{apps_2tetris_2main_8c_a66a310b0917a56120d5eec8c86066461}{\+\_\+np}}
\item 
static \mbox{\hyperlink{status_8h_a67a0db04d321a74b7e7fcfd3f1a3f70b}{Status}} \mbox{\hyperlink{apps_2tetris_2main_8c_a6cdf6e6db875a442f3ab6db542bd2bb5}{\+\_\+status}}
\item 
static \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}} \mbox{\hyperlink{apps_2tetris_2main_8c_a3b61dc076d66b07a466af8d80eb02283}{\+\_\+ticks\+\_\+update}} = \mbox{\hyperlink{apps_2snake_2main_8c_a8dd63073e02e2b072414b6bf3cdf57d6}{FALL\+\_\+\+SPEED\+\_\+\+DEFAULT}}
\item 
static bool \mbox{\hyperlink{apps_2tetris_2main_8c_a3bd315b7f7932213204e50b823729896}{\+\_\+changed}}
\item 
static \mbox{\hyperlink{apps_2snake_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19}{Field\+Type}} \mbox{\hyperlink{apps_2tetris_2main_8c_a712087fe8401cc72eeea97bf20629aef}{\+\_\+field}} \mbox{[}\mbox{\hyperlink{apps_2snake_2main_8c_a49d2668adfdf4f710a6c58fdbc0bcbe6}{FIELD\+\_\+\+SIZE}}\mbox{]}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Tetris game for the OS. 

\begin{DoxyAuthor}{Author}
Anton Tchekov 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
24.\+05.\+2023 
\end{DoxyDate}


Definition in file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.



\doxysubsection{Macro Definition Documentation}
\Hypertarget{apps_2tetris_2main_8c_ad51ded0bbd705f02f73fc60c0b721ced}\label{apps_2tetris_2main_8c_ad51ded0bbd705f02f73fc60c0b721ced} 
\index{main.c@{main.c}!BLOCK\_SIZE@{BLOCK\_SIZE}}
\index{BLOCK\_SIZE@{BLOCK\_SIZE}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{BLOCK\_SIZE}{BLOCK\_SIZE}}
{\footnotesize\ttfamily \#define BLOCK\+\_\+\+SIZE~20}

Size of each block in pixels 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00021}{21}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.

\Hypertarget{apps_2tetris_2main_8c_a8dd63073e02e2b072414b6bf3cdf57d6}\label{apps_2tetris_2main_8c_a8dd63073e02e2b072414b6bf3cdf57d6} 
\index{main.c@{main.c}!FALL\_SPEED\_DEFAULT@{FALL\_SPEED\_DEFAULT}}
\index{FALL\_SPEED\_DEFAULT@{FALL\_SPEED\_DEFAULT}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{FALL\_SPEED\_DEFAULT}{FALL\_SPEED\_DEFAULT}}
{\footnotesize\ttfamily \#define FALL\+\_\+\+SPEED\+\_\+\+DEFAULT~200}

Default falling speed in milliseconds 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00024}{24}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.

\Hypertarget{apps_2tetris_2main_8c_aa4b7f297dae8ab980841cd5ecdb93ee8}\label{apps_2tetris_2main_8c_aa4b7f297dae8ab980841cd5ecdb93ee8} 
\index{main.c@{main.c}!FALL\_SPEED\_FAST@{FALL\_SPEED\_FAST}}
\index{FALL\_SPEED\_FAST@{FALL\_SPEED\_FAST}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{FALL\_SPEED\_FAST}{FALL\_SPEED\_FAST}}
{\footnotesize\ttfamily \#define FALL\+\_\+\+SPEED\+\_\+\+FAST~30}

Falling speed when down button is pressed 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00027}{27}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.

\Hypertarget{apps_2tetris_2main_8c_a90b3ddaf01d4c39af0567b4500e9c4c6}\label{apps_2tetris_2main_8c_a90b3ddaf01d4c39af0567b4500e9c4c6} 
\index{main.c@{main.c}!FIELD\_HEIGHT@{FIELD\_HEIGHT}}
\index{FIELD\_HEIGHT@{FIELD\_HEIGHT}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{FIELD\_HEIGHT}{FIELD\_HEIGHT}}
{\footnotesize\ttfamily \#define FIELD\+\_\+\+HEIGHT~20}

Field height in blocks 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00015}{15}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.

\Hypertarget{apps_2tetris_2main_8c_a49d2668adfdf4f710a6c58fdbc0bcbe6}\label{apps_2tetris_2main_8c_a49d2668adfdf4f710a6c58fdbc0bcbe6} 
\index{main.c@{main.c}!FIELD\_SIZE@{FIELD\_SIZE}}
\index{FIELD\_SIZE@{FIELD\_SIZE}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{FIELD\_SIZE}{FIELD\_SIZE}}
{\footnotesize\ttfamily \#define FIELD\+\_\+\+SIZE~(\mbox{\hyperlink{apps_2snake_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}{FIELD\+\_\+\+WIDTH}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{apps_2snake_2main_8c_a90b3ddaf01d4c39af0567b4500e9c4c6}{FIELD\+\_\+\+HEIGHT}})}

Field size in blocks 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00018}{18}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.

\Hypertarget{apps_2tetris_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}\label{apps_2tetris_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c} 
\index{main.c@{main.c}!FIELD\_WIDTH@{FIELD\_WIDTH}}
\index{FIELD\_WIDTH@{FIELD\_WIDTH}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{FIELD\_WIDTH}{FIELD\_WIDTH}}
{\footnotesize\ttfamily \#define FIELD\+\_\+\+WIDTH~10}

Field width in blocks 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00012}{12}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.

\Hypertarget{apps_2tetris_2main_8c_a799b04d03f49612e3e636b56c3972b80}\label{apps_2tetris_2main_8c_a799b04d03f49612e3e636b56c3972b80} 
\index{main.c@{main.c}!STATUS\_RUNNING@{STATUS\_RUNNING}}
\index{STATUS\_RUNNING@{STATUS\_RUNNING}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{STATUS\_RUNNING}{STATUS\_RUNNING}}
{\footnotesize\ttfamily \#define STATUS\+\_\+\+RUNNING~1}

Game state\+: running 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00030}{30}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.



\doxysubsection{Typedef Documentation}
\Hypertarget{apps_2tetris_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19}\label{apps_2tetris_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19} 
\index{main.c@{main.c}!FieldType@{FieldType}}
\index{FieldType@{FieldType}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{FieldType}{FieldType}}
{\footnotesize\ttfamily typedef \mbox{\hyperlink{types_8h_a92c50087ca0e64fa93fc59402c55f8ca}{u8}} \mbox{\hyperlink{apps_2snake_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19}{Field\+Type}}}

VARIABLES Type that stores what piece type a tile in a field belongs to 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00104}{104}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.



\doxysubsection{Enumeration Type Documentation}
\Hypertarget{apps_2tetris_2main_8c_a12ed9719bbdf7bc596ff7a6f4bf3f021}\label{apps_2tetris_2main_8c_a12ed9719bbdf7bc596ff7a6f4bf3f021} 
\index{main.c@{main.c}!PieceType@{PieceType}}
\index{PieceType@{PieceType}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{PieceType}{PieceType}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{apps_2snake_2main_8c_a12ed9719bbdf7bc596ff7a6f4bf3f021}{Piece\+Type}}}

\doxylink{structPiece}{Piece} Type 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00033}{33}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00033\ \{\ I,\ J,\ L,\ O,\ S,\ T,\ Z\ \}\ \mbox{\hyperlink{apps_2snake_2main_8c_a12ed9719bbdf7bc596ff7a6f4bf3f021}{PieceType}};}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\Hypertarget{apps_2tetris_2main_8c_ade05f2059114427e9bcbc708760f5da3}\label{apps_2tetris_2main_8c_ade05f2059114427e9bcbc708760f5da3} 
\index{main.c@{main.c}!\_draw\_field@{\_draw\_field}}
\index{\_draw\_field@{\_draw\_field}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{\_draw\_field()}{\_draw\_field()}}
{\footnotesize\ttfamily static void \+\_\+draw\+\_\+field (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Draw the tetris field to the screen. 



Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00314}{314}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00315\ \{}
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{apps_2snake_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19}{FieldType}}\ \textcolor{keyword}{new}[\mbox{\hyperlink{apps_2snake_2main_8c_a49d2668adfdf4f710a6c58fdbc0bcbe6}{FIELD\_SIZE}}],\ prev[\mbox{\hyperlink{apps_2snake_2main_8c_a49d2668adfdf4f710a6c58fdbc0bcbe6}{FIELD\_SIZE}}];}
\DoxyCodeLine{00317\ \ \ \ \ \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}}\ x,\ y,\ offset;}
\DoxyCodeLine{00318\ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a12ed9719bbdf7bc596ff7a6f4bf3f021}{PieceType}}\ type;}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \ \ \ \ \mbox{\hyperlink{string_8c_a6ea826c42748b85ae7c74f1e2ccf7c27}{memcpy}}(\textcolor{keyword}{new},\ \mbox{\hyperlink{apps_2snake_2main_8c_a712087fe8401cc72eeea97bf20629aef}{\_field}},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{apps_2snake_2main_8c_a712087fe8401cc72eeea97bf20629aef}{\_field}}));}
\DoxyCodeLine{00321\ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a179f7e3f493ed0a3bdf1bc11907e8c98}{\_to\_field}}(\textcolor{keyword}{new},\ \&\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}});}
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{comment}{//\_to\_field(new,\ \&\_np);}}
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{keywordflow}{for}(y\ =\ 0;\ y\ <\ \mbox{\hyperlink{apps_2snake_2main_8c_a90b3ddaf01d4c39af0567b4500e9c4c6}{FIELD\_HEIGHT}};\ ++y)}
\DoxyCodeLine{00324\ \ \ \ \ \{}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(x\ =\ 0;\ x\ <\ \mbox{\hyperlink{apps_2snake_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}{FIELD\_WIDTH}};\ ++x)}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \ \ \ \ offset\ =\ y\ *\ \mbox{\hyperlink{apps_2snake_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}{FIELD\_WIDTH}}\ +\ x;}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \ \ \ \ type\ =\ \textcolor{keyword}{new}[offset];}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gfx-types_8h_acbbccb6085c654282ef64cdcefc81be5}{Color}}\ color\ =\ type\ ?\ \mbox{\hyperlink{apps_2snake_2main_8c_a975dd0ea903eaee5b01dc8fa1f03cc21}{Pieces}}[type\ -\/\ 1].\mbox{\hyperlink{structPieceData_ae4b53d0c13616cfde02acbd0667f0ead}{Fill}}\ :\ \mbox{\hyperlink{lcd_8h_aba2a7fe77a7501e5844370eec0185207}{COLOR\_BLACK}};}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(type\ !=\ prev[offset])}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gfx_8c_a61d70a4550bf181cd71bfc9a4f12a6d1}{gfx\_rect}}(}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x\ *\ \mbox{\hyperlink{apps_2snake_2main_8c_ad51ded0bbd705f02f73fc60c0b721ced}{BLOCK\_SIZE}}\ +\ 1,}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ y\ *\ \mbox{\hyperlink{apps_2snake_2main_8c_ad51ded0bbd705f02f73fc60c0b721ced}{BLOCK\_SIZE}}\ +\ 1,}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_ad51ded0bbd705f02f73fc60c0b721ced}{BLOCK\_SIZE}}\ -\/\ 1,}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_ad51ded0bbd705f02f73fc60c0b721ced}{BLOCK\_SIZE}}\ -\/\ 1,}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color);}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00340\ \ \ \ \ \}}
\DoxyCodeLine{00341\ }
\DoxyCodeLine{00342\ \ \ \ \ \mbox{\hyperlink{string_8c_a6ea826c42748b85ae7c74f1e2ccf7c27}{memcpy}}(prev,\ \textcolor{keyword}{new},\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{apps_2snake_2main_8c_a712087fe8401cc72eeea97bf20629aef}{\_field}}));}
\DoxyCodeLine{00343\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{apps_2snake_2main_8c_source_l00107}{\+\_\+cp}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00122}{\+\_\+field}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00286}{\+\_\+to\+\_\+field()}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00021}{BLOCK\+\_\+\+SIZE}}, \mbox{\hyperlink{lcd_8h_source_l00038}{COLOR\+\_\+\+BLACK}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00015}{FIELD\+\_\+\+HEIGHT}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00018}{FIELD\+\_\+\+SIZE}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00012}{FIELD\+\_\+\+WIDTH}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00058}{Piece\+Data\+::\+Fill}}, \mbox{\hyperlink{gfx_8c_source_l00011}{gfx\+\_\+rect()}}, \mbox{\hyperlink{string_8c_source_l00094}{memcpy()}}, and \mbox{\hyperlink{apps_2snake_2main_8c_source_l00062}{Pieces}}.

\Hypertarget{apps_2tetris_2main_8c_a63512b1efd6d377245329f587094f300}\label{apps_2tetris_2main_8c_a63512b1efd6d377245329f587094f300} 
\index{main.c@{main.c}!\_draw\_grid@{\_draw\_grid}}
\index{\_draw\_grid@{\_draw\_grid}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{\_draw\_grid()}{\_draw\_grid()}}
{\footnotesize\ttfamily static void \+\_\+draw\+\_\+grid (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Draw field grid. 



Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00193}{193}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00194\ \{}
\DoxyCodeLine{00195\ \ \ \ \ \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}}\ i;}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keywordflow}{for}(i\ =\ 0;\ i\ <=\ \mbox{\hyperlink{apps_2snake_2main_8c_ad51ded0bbd705f02f73fc60c0b721ced}{BLOCK\_SIZE}}\ *\ \mbox{\hyperlink{apps_2snake_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}{FIELD\_WIDTH}};\ i\ +=\ \mbox{\hyperlink{apps_2snake_2main_8c_ad51ded0bbd705f02f73fc60c0b721ced}{BLOCK\_SIZE}})}
\DoxyCodeLine{00197\ \ \ \ \ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gfx_8c_a61d70a4550bf181cd71bfc9a4f12a6d1}{gfx\_rect}}(i,\ 0,\ 1,\ \mbox{\hyperlink{apps_2snake_2main_8c_ad51ded0bbd705f02f73fc60c0b721ced}{BLOCK\_SIZE}}\ *\ \mbox{\hyperlink{apps_2snake_2main_8c_a90b3ddaf01d4c39af0567b4500e9c4c6}{FIELD\_HEIGHT}},\ \mbox{\hyperlink{lcd_8h_a9b44987ffdc2af19b635206b94334b69}{COLOR\_WHITE}});}
\DoxyCodeLine{00199\ \ \ \ \ \}}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keywordflow}{for}(i\ =\ 0;\ i\ <=\ \mbox{\hyperlink{apps_2snake_2main_8c_ad51ded0bbd705f02f73fc60c0b721ced}{BLOCK\_SIZE}}\ *\ \mbox{\hyperlink{apps_2snake_2main_8c_a90b3ddaf01d4c39af0567b4500e9c4c6}{FIELD\_HEIGHT}};\ i\ +=\ \mbox{\hyperlink{apps_2snake_2main_8c_ad51ded0bbd705f02f73fc60c0b721ced}{BLOCK\_SIZE}})}
\DoxyCodeLine{00202\ \ \ \ \ \{}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{gfx_8c_a61d70a4550bf181cd71bfc9a4f12a6d1}{gfx\_rect}}(0,\ i,\ \mbox{\hyperlink{apps_2snake_2main_8c_ad51ded0bbd705f02f73fc60c0b721ced}{BLOCK\_SIZE}}\ *\ \mbox{\hyperlink{apps_2snake_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}{FIELD\_WIDTH}},\ 1,\ \mbox{\hyperlink{lcd_8h_a9b44987ffdc2af19b635206b94334b69}{COLOR\_WHITE}});}
\DoxyCodeLine{00204\ \ \ \ \ \}}
\DoxyCodeLine{00205\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{apps_2snake_2main_8c_source_l00021}{BLOCK\+\_\+\+SIZE}}, \mbox{\hyperlink{lcd_8h_source_l00035}{COLOR\+\_\+\+WHITE}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00015}{FIELD\+\_\+\+HEIGHT}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00012}{FIELD\+\_\+\+WIDTH}}, and \mbox{\hyperlink{gfx_8c_source_l00011}{gfx\+\_\+rect()}}.

\Hypertarget{apps_2tetris_2main_8c_a7c2806ca944c2472b5e1d9234fc6fce7}\label{apps_2tetris_2main_8c_a7c2806ca944c2472b5e1d9234fc6fce7} 
\index{main.c@{main.c}!\_field\_get@{\_field\_get}}
\index{\_field\_get@{\_field\_get}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{\_field\_get()}{\_field\_get()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}} \+\_\+field\+\_\+get (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{apps_2snake_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19}{Field\+Type}} \texorpdfstring{$\ast$}{*}}]{field,  }\item[{\mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}}}]{x,  }\item[{\mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}}}]{y }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Get the piece at a position inside a field. 


\begin{DoxyParams}{Parameters}
{\em field} & The field \\
\hline
{\em x} & X-\/coordinate \\
\hline
{\em y} & Y-\/coordinate \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}

\end{DoxyReturn}


Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00134}{134}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00135\ \{}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordflow}{return}\ (x\ <\ 0\ ||\ x\ >=\ \mbox{\hyperlink{apps_2snake_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}{FIELD\_WIDTH}}\ ||\ y\ <\ 0\ ||\ y\ >=\ \mbox{\hyperlink{apps_2snake_2main_8c_a90b3ddaf01d4c39af0567b4500e9c4c6}{FIELD\_HEIGHT}})\ ?\ -\/1\ :}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ field[y\ *\ \mbox{\hyperlink{apps_2snake_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}{FIELD\_WIDTH}}\ +\ x];}
\DoxyCodeLine{00138\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{apps_2snake_2main_8c_source_l00015}{FIELD\+\_\+\+HEIGHT}}, and \mbox{\hyperlink{apps_2snake_2main_8c_source_l00012}{FIELD\+\_\+\+WIDTH}}.

\Hypertarget{apps_2tetris_2main_8c_adf863a16219a55882b73716b8ee2b8b8}\label{apps_2tetris_2main_8c_adf863a16219a55882b73716b8ee2b8b8} 
\index{main.c@{main.c}!\_field\_rows@{\_field\_rows}}
\index{\_field\_rows@{\_field\_rows}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{\_field\_rows()}{\_field\_rows()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}} \+\_\+field\+\_\+rows (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{apps_2snake_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19}{Field\+Type}} \texorpdfstring{$\ast$}{*}}]{field }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Remove full rows and update score. 


\begin{DoxyParams}{Parameters}
{\em field} & Playing field \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Score change 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00165}{165}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00166\ \{}
\DoxyCodeLine{00167\ \ \ \ \ \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}}\ x,\ y,\ score;}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \ \ score\ =\ 0;}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keywordflow}{for}(y\ =\ 0;\ y\ <\ \mbox{\hyperlink{apps_2snake_2main_8c_a90b3ddaf01d4c39af0567b4500e9c4c6}{FIELD\_HEIGHT}};\ ++y)}
\DoxyCodeLine{00171\ \ \ \ \ \{}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(x\ =\ 0;\ x\ <\ \mbox{\hyperlink{apps_2snake_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}{FIELD\_WIDTH}};\ ++x)}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!field[y\ *\ \mbox{\hyperlink{apps_2snake_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}{FIELD\_WIDTH}}\ +\ x])}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(x\ ==\ \mbox{\hyperlink{apps_2snake_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}{FIELD\_WIDTH}})}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a6859d50f3303a4d278f0e97438fa1854}{\_field\_shift}}(field,\ y);}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ score\ +=\ 100;}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00185\ \ \ \ \ \}}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{keywordflow}{return}\ score;}
\DoxyCodeLine{00188\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{apps_2snake_2main_8c_source_l00146}{\+\_\+field\+\_\+shift()}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00015}{FIELD\+\_\+\+HEIGHT}}, and \mbox{\hyperlink{apps_2snake_2main_8c_source_l00012}{FIELD\+\_\+\+WIDTH}}.

\Hypertarget{apps_2tetris_2main_8c_a6859d50f3303a4d278f0e97438fa1854}\label{apps_2tetris_2main_8c_a6859d50f3303a4d278f0e97438fa1854} 
\index{main.c@{main.c}!\_field\_shift@{\_field\_shift}}
\index{\_field\_shift@{\_field\_shift}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{\_field\_shift()}{\_field\_shift()}}
{\footnotesize\ttfamily static void \+\_\+field\+\_\+shift (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{apps_2snake_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19}{Field\+Type}} \texorpdfstring{$\ast$}{*}}]{field,  }\item[{\mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}}}]{row }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Clear a row and shift down rows above. 


\begin{DoxyParams}{Parameters}
{\em field} & Playing field \\
\hline
{\em row} & The row to remove \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00146}{146}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00147\ \{}
\DoxyCodeLine{00148\ \ \ \ \ \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}}\ x,\ y;}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keywordflow}{for}(y\ =\ row;\ y\ >\ 0;\ -\/-\/y)}
\DoxyCodeLine{00150\ \ \ \ \ \{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(x\ =\ 0;\ x\ <\ \mbox{\hyperlink{apps_2snake_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}{FIELD\_WIDTH}};\ ++x)}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ field[y\ *\ \mbox{\hyperlink{apps_2snake_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}{FIELD\_WIDTH}}\ +\ x]\ =}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ field[(y\ -\/\ 1)\ *\ \mbox{\hyperlink{apps_2snake_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}{FIELD\_WIDTH}}\ +\ x];}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00156\ \ \ \ \ \}}
\DoxyCodeLine{00157\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{apps_2snake_2main_8c_source_l00012}{FIELD\+\_\+\+WIDTH}}.

\Hypertarget{apps_2tetris_2main_8c_a8fe5892e2d197c0c60dfaaa2559f64ae}\label{apps_2tetris_2main_8c_a8fe5892e2d197c0c60dfaaa2559f64ae} 
\index{main.c@{main.c}!\_new\_piece@{\_new\_piece}}
\index{\_new\_piece@{\_new\_piece}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{\_new\_piece()}{\_new\_piece()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{apps_2snake_2main_8c_a12ed9719bbdf7bc596ff7a6f4bf3f021}{Piece\+Type}} \+\_\+new\+\_\+piece (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structPiece}{Piece}} \texorpdfstring{$\ast$}{*}}]{p }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Get the next random tetris piece. 


\begin{DoxyParams}{Parameters}
{\em p} & Output parameter for new piece \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\doxylink{structPiece}{Piece} type of the following piece 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00213}{213}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00214\ \{}
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{apps_2snake_2main_8c_a12ed9719bbdf7bc596ff7a6f4bf3f021}{PieceType}}\ next,\ bag[7];}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}}\ idx\ =\ 6;}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \ \ \textcolor{keywordflow}{if}(idx\ ==\ 6)}
\DoxyCodeLine{00219\ \ \ \ \ \{}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ create\ a\ new\ shuffled\ bag\ of\ pieces\ */}}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ i,\ j,\ tmp;}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(i\ =\ 0;\ i\ <\ 7;\ ++i)}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ bag[i]\ =\ i;}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(i\ =\ 0;\ i\ <\ 7;\ ++i)}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ j\ =\ \mbox{\hyperlink{rand_8c_a9eeb6c44d48cd8ace4b454da982406c9}{rand}}()\ \%\ 7;}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ tmp\ =\ bag[i];}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ bag[i]\ =\ bag[j];}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ bag[j]\ =\ tmp;}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ idx\ =\ 0;}
\DoxyCodeLine{00236\ \ \ \ \ \}}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ \ \ p-\/>\mbox{\hyperlink{structPiece_a3cddb7dc76f326558891036d46d5351b}{X}}\ =\ 4;}
\DoxyCodeLine{00239\ \ \ \ \ p-\/>\mbox{\hyperlink{structPiece_aab10b280efc0ec449f674e6c5bf2cb02}{Y}}\ =\ 0;}
\DoxyCodeLine{00240\ \ \ \ \ p-\/>\mbox{\hyperlink{structPiece_a700d5a2720932a70447d8c675fb6e2b4}{Rotation}}\ =\ 0;}
\DoxyCodeLine{00241\ \ \ \ \ p-\/>\mbox{\hyperlink{structPiece_a57548407d4c534712ac9ea47c86fa4d8}{Type}}\ =\ next;}
\DoxyCodeLine{00242\ \ \ \ \ next\ =\ bag[idx++];}
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keywordflow}{return}\ next;}
\DoxyCodeLine{00244\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{rand_8c_source_l00011}{rand()}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00045}{Piece\+::\+Rotation}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00048}{Piece\+::\+Type}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00039}{Piece\+::X}}, and \mbox{\hyperlink{apps_2snake_2main_8c_source_l00042}{Piece\+::Y}}.

\Hypertarget{apps_2tetris_2main_8c_a179f7e3f493ed0a3bdf1bc11907e8c98}\label{apps_2tetris_2main_8c_a179f7e3f493ed0a3bdf1bc11907e8c98} 
\index{main.c@{main.c}!\_to\_field@{\_to\_field}}
\index{\_to\_field@{\_to\_field}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{\_to\_field()}{\_to\_field()}}
{\footnotesize\ttfamily static void \+\_\+to\+\_\+field (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{apps_2snake_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19}{Field\+Type}} \texorpdfstring{$\ast$}{*}}]{field,  }\item[{\mbox{\hyperlink{structPiece}{Piece}} \texorpdfstring{$\ast$}{*}}]{p }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Place a piece into a field. 


\begin{DoxyParams}{Parameters}
{\em field} & Pointer to the field on which to put the piece \\
\hline
{\em p} & Pointer to the piece that should be placed \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00286}{286}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00287\ \{}
\DoxyCodeLine{00288\ \ \ \ \ \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}}\ x,\ y,\ bit,\ row,\ col;}
\DoxyCodeLine{00289\ \ \ \ \ \mbox{\hyperlink{types_8h_ace9d960e74685e2cd84b36132dbbf8aa}{u16}}\ blocks;}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \ \ \ \ row\ =\ col\ =\ 0;}
\DoxyCodeLine{00292\ \ \ \ \ blocks\ =\ \mbox{\hyperlink{apps_2snake_2main_8c_a975dd0ea903eaee5b01dc8fa1f03cc21}{Pieces}}[p-\/>\mbox{\hyperlink{structPiece_a57548407d4c534712ac9ea47c86fa4d8}{Type}}].\mbox{\hyperlink{structPieceData_ac34b3d4c681d56025652271171d3db08}{Blocks}}[p-\/>\mbox{\hyperlink{structPiece_a700d5a2720932a70447d8c675fb6e2b4}{Rotation}}];}
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{keywordflow}{for}(bit\ =\ 0x8000;\ bit\ >\ 0;\ bit\ >>=\ 1)}
\DoxyCodeLine{00294\ \ \ \ \ \{}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(blocks\ \&\ bit)}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ p-\/>\mbox{\hyperlink{structPiece_a3cddb7dc76f326558891036d46d5351b}{X}}\ +\ col;}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ y\ =\ p-\/>\mbox{\hyperlink{structPiece_aab10b280efc0ec449f674e6c5bf2cb02}{Y}}\ +\ row;}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ field[y\ *\ \mbox{\hyperlink{apps_2snake_2main_8c_a313353b53d609b3b2b37e1aecf98bf4c}{FIELD\_WIDTH}}\ +\ x]\ =\ p-\/>\mbox{\hyperlink{structPiece_a57548407d4c534712ac9ea47c86fa4d8}{Type}}\ +\ 1;}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(++col\ ==\ 4)}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \ \ \ \ col\ =\ 0;}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ ++row;}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00308\ \ \ \ \ \}}
\DoxyCodeLine{00309\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{apps_2snake_2main_8c_source_l00055}{Piece\+Data\+::\+Blocks}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00012}{FIELD\+\_\+\+WIDTH}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00062}{Pieces}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00045}{Piece\+::\+Rotation}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00048}{Piece\+::\+Type}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00039}{Piece\+::X}}, and \mbox{\hyperlink{apps_2snake_2main_8c_source_l00042}{Piece\+::Y}}.

\Hypertarget{apps_2tetris_2main_8c_afa6a85d7ceaf4d7c8e3b17881258b6e3}\label{apps_2tetris_2main_8c_afa6a85d7ceaf4d7c8e3b17881258b6e3} 
\index{main.c@{main.c}!\_valid\_position@{\_valid\_position}}
\index{\_valid\_position@{\_valid\_position}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{\_valid\_position()}{\_valid\_position()}}
{\footnotesize\ttfamily static bool \+\_\+valid\+\_\+position (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{apps_2snake_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19}{Field\+Type}} \texorpdfstring{$\ast$}{*}}]{field,  }\item[{\mbox{\hyperlink{structPiece}{Piece}} \texorpdfstring{$\ast$}{*}}]{p }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Check if the position of a piece is valid, meaning that it is not outside of the frame and not colliding with pieces on the field. 


\begin{DoxyParams}{Parameters}
{\em field} & Pointer to field aray \\
\hline
{\em p} & Pointer to piece \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if position is valid, false otherwise 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00254}{254}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00255\ \{}
\DoxyCodeLine{00256\ \ \ \ \ \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}}\ bit,\ row,\ col;}
\DoxyCodeLine{00257\ \ \ \ \ \mbox{\hyperlink{types_8h_ace9d960e74685e2cd84b36132dbbf8aa}{u16}}\ blocks;}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \ \ row\ =\ 0;}
\DoxyCodeLine{00260\ \ \ \ \ col\ =\ 0;}
\DoxyCodeLine{00261\ \ \ \ \ blocks\ =\ \mbox{\hyperlink{apps_2snake_2main_8c_a975dd0ea903eaee5b01dc8fa1f03cc21}{Pieces}}[p-\/>\mbox{\hyperlink{structPiece_a57548407d4c534712ac9ea47c86fa4d8}{Type}}].\mbox{\hyperlink{structPieceData_ac34b3d4c681d56025652271171d3db08}{Blocks}}[p-\/>\mbox{\hyperlink{structPiece_a700d5a2720932a70447d8c675fb6e2b4}{Rotation}}];}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keywordflow}{for}(bit\ =\ 0x8000;\ bit\ >\ 0;\ bit\ >>=\ 1)}
\DoxyCodeLine{00264\ \ \ \ \ \{}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}((blocks\ \&\ bit)\ \&\&\ \mbox{\hyperlink{apps_2snake_2main_8c_a7c2806ca944c2472b5e1d9234fc6fce7}{\_field\_get}}(field,\ p-\/>\mbox{\hyperlink{structPiece_a3cddb7dc76f326558891036d46d5351b}{X}}\ +\ col,\ p-\/>\mbox{\hyperlink{structPiece_aab10b280efc0ec449f674e6c5bf2cb02}{Y}}\ +\ row))}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(++col\ ==\ 4)}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ col\ =\ 0;}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ ++row;}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00275\ \ \ \ \ \}}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00278\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{apps_2snake_2main_8c_source_l00134}{\+\_\+field\+\_\+get()}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00055}{Piece\+Data\+::\+Blocks}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00062}{Pieces}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00045}{Piece\+::\+Rotation}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00048}{Piece\+::\+Type}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00039}{Piece\+::X}}, and \mbox{\hyperlink{apps_2snake_2main_8c_source_l00042}{Piece\+::Y}}.

\Hypertarget{apps_2tetris_2main_8c_af5305db9ea018cc40d167b2a51d77ac1}\label{apps_2tetris_2main_8c_af5305db9ea018cc40d167b2a51d77ac1} 
\index{main.c@{main.c}!event\_key@{event\_key}}
\index{event\_key@{event\_key}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{event\_key()}{event\_key()}}
{\footnotesize\ttfamily void event\+\_\+key (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{keyboard-shared_8h_a48752551c4279f8cddf3585f8272092a}{Key}}}]{key,  }\item[{\mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}}}]{chr,  }\item[{\mbox{\hyperlink{keyboard-shared_8h_a7e51438e5f6bf556512ce7103cddac09}{Key\+State}}}]{state }\end{DoxyParamCaption})}



Main key event handler. 


\begin{DoxyParams}{Parameters}
{\em key} & The key that was pressed \\
\hline
{\em chr} & The character corresponding to the key \\
\hline
{\em state} & Key state (pressed, repeat, released) \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00352}{352}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00353\ \{}
\DoxyCodeLine{00354\ \ \ \ \ \textcolor{keywordflow}{if}(state\ ==\ KEYSTATE\_RELEASED)}
\DoxyCodeLine{00355\ \ \ \ \ \{}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}(key)}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ KEY\_DOWN:}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a3b61dc076d66b07a466af8d80eb02283}{\_ticks\_update}}\ =\ \mbox{\hyperlink{apps_2snake_2main_8c_a8dd63073e02e2b072414b6bf3cdf57d6}{FALL\_SPEED\_DEFAULT}};}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00362\ \ \ \ \ \}}
\DoxyCodeLine{00363\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00364\ \ \ \ \ \{}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}(key)}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ KEY\_DOWN:}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a3b61dc076d66b07a466af8d80eb02283}{\_ticks\_update}}\ =\ \mbox{\hyperlink{apps_2snake_2main_8c_aa4b7f297dae8ab980841cd5ecdb93ee8}{FALL\_SPEED\_FAST}};}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ KEY\_UP:}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(-\/-\/\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}}.\mbox{\hyperlink{structPiece_a700d5a2720932a70447d8c675fb6e2b4}{Rotation}}\ ==\ -\/1)}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}}.\mbox{\hyperlink{structPiece_a700d5a2720932a70447d8c675fb6e2b4}{Rotation}}\ =\ 3;}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00376\ }
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{apps_2snake_2main_8c_afa6a85d7ceaf4d7c8e3b17881258b6e3}{\_valid\_position}}(\mbox{\hyperlink{apps_2snake_2main_8c_a712087fe8401cc72eeea97bf20629aef}{\_field}},\ \&\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}}))}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(++\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}}.\mbox{\hyperlink{structPiece_a700d5a2720932a70447d8c675fb6e2b4}{Rotation}}\ ==\ 4)}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}}.\mbox{\hyperlink{structPiece_a700d5a2720932a70447d8c675fb6e2b4}{Rotation}}\ =\ 0;}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00384\ }
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a3bd315b7f7932213204e50b823729896}{\_changed}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00387\ }
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ KEY\_LEFT:}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}}.\mbox{\hyperlink{structPiece_a3cddb7dc76f326558891036d46d5351b}{X}};}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a3bd315b7f7932213204e50b823729896}{\_changed}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{apps_2snake_2main_8c_afa6a85d7ceaf4d7c8e3b17881258b6e3}{\_valid\_position}}(\mbox{\hyperlink{apps_2snake_2main_8c_a712087fe8401cc72eeea97bf20629aef}{\_field}},\ \&\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}}))}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}}.\mbox{\hyperlink{structPiece_a3cddb7dc76f326558891036d46d5351b}{X}};}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00396\ }
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ KEY\_RIGHT:}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}}.\mbox{\hyperlink{structPiece_a3cddb7dc76f326558891036d46d5351b}{X}};}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a3bd315b7f7932213204e50b823729896}{\_changed}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{apps_2snake_2main_8c_afa6a85d7ceaf4d7c8e3b17881258b6e3}{\_valid\_position}}(\mbox{\hyperlink{apps_2snake_2main_8c_a712087fe8401cc72eeea97bf20629aef}{\_field}},\ \&\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}}))}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}}.\mbox{\hyperlink{structPiece_a3cddb7dc76f326558891036d46d5351b}{X}};}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00406\ \ \ \ \ \}}
\DoxyCodeLine{00407\ }
\DoxyCodeLine{00408\ \ \ \ \ (void)chr;}
\DoxyCodeLine{00409\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{apps_2snake_2main_8c_source_l00119}{\+\_\+changed}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00107}{\+\_\+cp}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00122}{\+\_\+field}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00116}{\+\_\+ticks\+\_\+update}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00254}{\+\_\+valid\+\_\+position()}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00024}{FALL\+\_\+\+SPEED\+\_\+\+DEFAULT}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00027}{FALL\+\_\+\+SPEED\+\_\+\+FAST}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00045}{Piece\+::\+Rotation}}, and \mbox{\hyperlink{apps_2snake_2main_8c_source_l00039}{Piece\+::X}}.

\Hypertarget{apps_2tetris_2main_8c_a0b33edabd7f1c4e4a0bf32c67269be2f}\label{apps_2tetris_2main_8c_a0b33edabd7f1c4e4a0bf32c67269be2f} 
\index{main.c@{main.c}!loop@{loop}}
\index{loop@{loop}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{loop()}{loop()}}
{\footnotesize\ttfamily void loop (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Main game loop, update state. 

Loop function that is called repeatedly Must be implemented by user. 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00430}{430}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00431\ \{}
\DoxyCodeLine{00432\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}}\ last\_ticks,\ score;}
\DoxyCodeLine{00433\ \ \ \ \ \mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}}\ ticks;}
\DoxyCodeLine{00434\ }
\DoxyCodeLine{00435\ \ \ \ \ \textcolor{keywordflow}{if}((ticks\ =\ \mbox{\hyperlink{timer_8c_aee701eeb891b748ed2e12da119816882}{millis}}())\ >\ last\_ticks\ +\ \mbox{\hyperlink{apps_2snake_2main_8c_a3b61dc076d66b07a466af8d80eb02283}{\_ticks\_update}})}
\DoxyCodeLine{00436\ \ \ \ \ \{}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ last\_ticks\ =\ ticks;}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}}.\mbox{\hyperlink{structPiece_aab10b280efc0ec449f674e6c5bf2cb02}{Y}};}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{apps_2snake_2main_8c_afa6a85d7ceaf4d7c8e3b17881258b6e3}{\_valid\_position}}(\mbox{\hyperlink{apps_2snake_2main_8c_a712087fe8401cc72eeea97bf20629aef}{\_field}},\ \&\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}}))}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}}.\mbox{\hyperlink{structPiece_aab10b280efc0ec449f674e6c5bf2cb02}{Y}};}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a179f7e3f493ed0a3bdf1bc11907e8c98}{\_to\_field}}(\mbox{\hyperlink{apps_2snake_2main_8c_a712087fe8401cc72eeea97bf20629aef}{\_field}},\ \&\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}});}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \ \ \ \ score\ +=\ \mbox{\hyperlink{apps_2snake_2main_8c_adf863a16219a55882b73716b8ee2b8b8}{\_field\_rows}}(\mbox{\hyperlink{apps_2snake_2main_8c_a712087fe8401cc72eeea97bf20629aef}{\_field}});}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a66a310b0917a56120d5eec8c86066461}{\_np}}.\mbox{\hyperlink{structPiece_a57548407d4c534712ac9ea47c86fa4d8}{Type}}\ =\ \mbox{\hyperlink{apps_2snake_2main_8c_a8fe5892e2d197c0c60dfaaa2559f64ae}{\_new\_piece}}(\&\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}});}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a3b61dc076d66b07a466af8d80eb02283}{\_ticks\_update}}\ =\ \mbox{\hyperlink{apps_2snake_2main_8c_a8dd63073e02e2b072414b6bf3cdf57d6}{FALL\_SPEED\_DEFAULT}};}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{apps_2snake_2main_8c_afa6a85d7ceaf4d7c8e3b17881258b6e3}{\_valid\_position}}(\mbox{\hyperlink{apps_2snake_2main_8c_a712087fe8401cc72eeea97bf20629aef}{\_field}},\ \&\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}}))}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{string_8c_ab5fb910d7238069eb23f4b06809aa68e}{memset}}(\mbox{\hyperlink{apps_2snake_2main_8c_a712087fe8401cc72eeea97bf20629aef}{\_field}},\ 0,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{apps_2snake_2main_8c_a712087fe8401cc72eeea97bf20629aef}{\_field}}));}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00451\ }
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a3bd315b7f7932213204e50b823729896}{\_changed}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00453\ \ \ \ \ \}}
\DoxyCodeLine{00454\ }
\DoxyCodeLine{00455\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{apps_2snake_2main_8c_a3bd315b7f7932213204e50b823729896}{\_changed}})}
\DoxyCodeLine{00456\ \ \ \ \ \{}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a3bd315b7f7932213204e50b823729896}{\_changed}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_ade05f2059114427e9bcbc708760f5da3}{\_draw\_field}}();}
\DoxyCodeLine{00459\ \ \ \ \ \}}
\DoxyCodeLine{00460\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{apps_2snake_2main_8c_source_l00119}{\+\_\+changed}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00107}{\+\_\+cp}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00314}{\+\_\+draw\+\_\+field()}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00122}{\+\_\+field}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00165}{\+\_\+field\+\_\+rows()}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00213}{\+\_\+new\+\_\+piece()}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00110}{\+\_\+np}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00116}{\+\_\+ticks\+\_\+update}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00286}{\+\_\+to\+\_\+field()}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00254}{\+\_\+valid\+\_\+position()}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00024}{FALL\+\_\+\+SPEED\+\_\+\+DEFAULT}}, \mbox{\hyperlink{string_8c_source_l00176}{memset()}}, \mbox{\hyperlink{timer_8c_source_l00036}{millis()}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00048}{Piece\+::\+Type}}, and \mbox{\hyperlink{apps_2snake_2main_8c_source_l00042}{Piece\+::Y}}.

\Hypertarget{apps_2tetris_2main_8c_a7dfd9b79bc5a37d7df40207afbc5431f}\label{apps_2tetris_2main_8c_a7dfd9b79bc5a37d7df40207afbc5431f} 
\index{main.c@{main.c}!setup@{setup}}
\index{setup@{setup}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{setup()}{setup()}}
{\footnotesize\ttfamily void setup (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Main setup function, initialize game. 

Setup function that is called at program start. Must be implemented by user. 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00414}{414}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00415\ \{}
\DoxyCodeLine{00416\ \ \ \ \ \mbox{\hyperlink{keyboard_8c_a3676e1550d4471bddab4c84dd0c844dc}{keyboard\_register\_event}}(\mbox{\hyperlink{apps_2editor_2main_8c_af5305db9ea018cc40d167b2a51d77ac1}{event\_key}});}
\DoxyCodeLine{00417\ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a66a310b0917a56120d5eec8c86066461}{\_np}}.\mbox{\hyperlink{structPiece_a3cddb7dc76f326558891036d46d5351b}{X}}\ =\ 11;}
\DoxyCodeLine{00418\ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a66a310b0917a56120d5eec8c86066461}{\_np}}.\mbox{\hyperlink{structPiece_aab10b280efc0ec449f674e6c5bf2cb02}{Y}}\ =\ 0;}
\DoxyCodeLine{00419\ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a66a310b0917a56120d5eec8c86066461}{\_np}}.\mbox{\hyperlink{structPiece_a700d5a2720932a70447d8c675fb6e2b4}{Rotation}}\ =\ 1;}
\DoxyCodeLine{00420\ \ \ \ \ \mbox{\hyperlink{string_8c_ab5fb910d7238069eb23f4b06809aa68e}{memset}}(\mbox{\hyperlink{apps_2snake_2main_8c_a712087fe8401cc72eeea97bf20629aef}{\_field}},\ 0,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{apps_2snake_2main_8c_a712087fe8401cc72eeea97bf20629aef}{\_field}}));}
\DoxyCodeLine{00421\ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a66a310b0917a56120d5eec8c86066461}{\_np}}.\mbox{\hyperlink{structPiece_a57548407d4c534712ac9ea47c86fa4d8}{Type}}\ =\ \mbox{\hyperlink{apps_2snake_2main_8c_a8fe5892e2d197c0c60dfaaa2559f64ae}{\_new\_piece}}(\&\mbox{\hyperlink{apps_2snake_2main_8c_a484db87782841a7763d17ef82d344de1}{\_cp}});}
\DoxyCodeLine{00422\ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a6cdf6e6db875a442f3ab6db542bd2bb5}{\_status}}\ =\ \mbox{\hyperlink{apps_2snake_2main_8c_a799b04d03f49612e3e636b56c3972b80}{STATUS\_RUNNING}};}
\DoxyCodeLine{00423\ \ \ \ \ \mbox{\hyperlink{apps_2snake_2main_8c_a63512b1efd6d377245329f587094f300}{\_draw\_grid}}();}
\DoxyCodeLine{00424\ \ \ \ \ \mbox{\hyperlink{font_8h_a1dc9a04991c7d42402c21ab6a4b933e2}{font\_string}}(210,\ 10,\ \textcolor{stringliteral}{"{}Next\ piece:"{}},\ font\_default,\ \mbox{\hyperlink{lcd_8h_a9b44987ffdc2af19b635206b94334b69}{COLOR\_WHITE}},\ \mbox{\hyperlink{lcd_8h_aba2a7fe77a7501e5844370eec0185207}{COLOR\_BLACK}});}
\DoxyCodeLine{00425\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{apps_2snake_2main_8c_source_l00107}{\+\_\+cp}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00193}{\+\_\+draw\+\_\+grid()}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00122}{\+\_\+field}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00213}{\+\_\+new\+\_\+piece()}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00110}{\+\_\+np}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00113}{\+\_\+status}}, \mbox{\hyperlink{lcd_8h_source_l00038}{COLOR\+\_\+\+BLACK}}, \mbox{\hyperlink{lcd_8h_source_l00035}{COLOR\+\_\+\+WHITE}}, \mbox{\hyperlink{apps_2editor_2main_8c_source_l00067}{event\+\_\+key()}}, \mbox{\hyperlink{font_8h_source_l00090}{font\+\_\+string()}}, \mbox{\hyperlink{keyboard_8c_source_l00031}{keyboard\+\_\+register\+\_\+event()}}, \mbox{\hyperlink{string_8c_source_l00176}{memset()}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00045}{Piece\+::\+Rotation}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00030}{STATUS\+\_\+\+RUNNING}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00048}{Piece\+::\+Type}}, \mbox{\hyperlink{apps_2snake_2main_8c_source_l00039}{Piece\+::X}}, and \mbox{\hyperlink{apps_2snake_2main_8c_source_l00042}{Piece\+::Y}}.



\doxysubsection{Variable Documentation}
\Hypertarget{apps_2tetris_2main_8c_a3bd315b7f7932213204e50b823729896}\label{apps_2tetris_2main_8c_a3bd315b7f7932213204e50b823729896} 
\index{main.c@{main.c}!\_changed@{\_changed}}
\index{\_changed@{\_changed}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{\_changed}{\_changed}}
{\footnotesize\ttfamily bool \+\_\+changed\hspace{0.3cm}{\ttfamily [static]}}

Indicates that the field has changed and should be redrawn 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00119}{119}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.

\Hypertarget{apps_2tetris_2main_8c_a484db87782841a7763d17ef82d344de1}\label{apps_2tetris_2main_8c_a484db87782841a7763d17ef82d344de1} 
\index{main.c@{main.c}!\_cp@{\_cp}}
\index{\_cp@{\_cp}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{\_cp}{\_cp}}
{\footnotesize\ttfamily \mbox{\hyperlink{structPiece}{Piece}} \+\_\+cp\hspace{0.3cm}{\ttfamily [static]}}

Current \doxylink{structPiece}{Piece} 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00107}{107}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.

\Hypertarget{apps_2tetris_2main_8c_a712087fe8401cc72eeea97bf20629aef}\label{apps_2tetris_2main_8c_a712087fe8401cc72eeea97bf20629aef} 
\index{main.c@{main.c}!\_field@{\_field}}
\index{\_field@{\_field}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{\_field}{\_field}}
{\footnotesize\ttfamily \mbox{\hyperlink{apps_2snake_2main_8c_a48e0eca677ce0a3de1dc2f2ea612cb19}{Field\+Type}} \+\_\+field\mbox{[}\mbox{\hyperlink{apps_2snake_2main_8c_a49d2668adfdf4f710a6c58fdbc0bcbe6}{FIELD\+\_\+\+SIZE}}\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}

Array that stores landed, non-\/moving pieces 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00122}{122}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.

\Hypertarget{apps_2tetris_2main_8c_a66a310b0917a56120d5eec8c86066461}\label{apps_2tetris_2main_8c_a66a310b0917a56120d5eec8c86066461} 
\index{main.c@{main.c}!\_np@{\_np}}
\index{\_np@{\_np}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{\_np}{\_np}}
{\footnotesize\ttfamily \mbox{\hyperlink{structPiece}{Piece}} \+\_\+np\hspace{0.3cm}{\ttfamily [static]}}

Next \doxylink{structPiece}{Piece} 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00110}{110}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.

\Hypertarget{apps_2tetris_2main_8c_a6cdf6e6db875a442f3ab6db542bd2bb5}\label{apps_2tetris_2main_8c_a6cdf6e6db875a442f3ab6db542bd2bb5} 
\index{main.c@{main.c}!\_status@{\_status}}
\index{\_status@{\_status}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{\_status}{\_status}}
{\footnotesize\ttfamily \mbox{\hyperlink{status_8h_a67a0db04d321a74b7e7fcfd3f1a3f70b}{Status}} \+\_\+status\hspace{0.3cm}{\ttfamily [static]}}

Current game status (see enum above) 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00113}{113}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.

\Hypertarget{apps_2tetris_2main_8c_a3b61dc076d66b07a466af8d80eb02283}\label{apps_2tetris_2main_8c_a3b61dc076d66b07a466af8d80eb02283} 
\index{main.c@{main.c}!\_ticks\_update@{\_ticks\_update}}
\index{\_ticks\_update@{\_ticks\_update}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{\_ticks\_update}{\_ticks\_update}}
{\footnotesize\ttfamily \mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}} \+\_\+ticks\+\_\+update = \mbox{\hyperlink{apps_2snake_2main_8c_a8dd63073e02e2b072414b6bf3cdf57d6}{FALL\+\_\+\+SPEED\+\_\+\+DEFAULT}}\hspace{0.3cm}{\ttfamily [static]}}

Milliseconds duration for a tile to move down by one tile 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00116}{116}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.

\Hypertarget{apps_2tetris_2main_8c_a975dd0ea903eaee5b01dc8fa1f03cc21}\label{apps_2tetris_2main_8c_a975dd0ea903eaee5b01dc8fa1f03cc21} 
\index{main.c@{main.c}!Pieces@{Pieces}}
\index{Pieces@{Pieces}!main.c@{main.c}}
\doxysubsubsection{\texorpdfstring{Pieces}{Pieces}}
{\footnotesize\ttfamily const \mbox{\hyperlink{structPieceData}{Piece\+Data}} Pieces\mbox{[}$\,$\mbox{]}}

All 7 tetrominos 

Definition at line \mbox{\hyperlink{apps_2tetris_2main_8c_source_l00062}{62}} of file \mbox{\hyperlink{apps_2tetris_2main_8c_source}{main.\+c}}.

