\hypertarget{vector_8c}{}\doxysection{stdlib/vector/vector.c File Reference}
\label{vector_8c}\index{stdlib/vector/vector.c@{stdlib/vector/vector.c}}
{\ttfamily \#include $<$vector.\+h$>$}\newline
{\ttfamily \#include $<$alloc.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$panic.\+h$>$}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}} \mbox{\hyperlink{vector_8c_ae2ff8fa33ac906e41f31fd19a1f51acc}{\+\_\+next\+\_\+pot}} (\mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}} n)
\begin{DoxyCompactList}\small\item\em Next power of two. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{vector_8c_a9618b41b25efb749069cbfff9c3cadcf}{vector\+\_\+init}} (\mbox{\hyperlink{structVector}{Vector}} $\ast$vector, \mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}} element\+\_\+size, \mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}} initial\+\_\+capacity)
\begin{DoxyCompactList}\small\item\em Initialize a vector with an element size and an initial capacity. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{vector_8c_a0c0be12f800dc5bc6777b4ff324f41ca}{vector\+\_\+destroy}} (\mbox{\hyperlink{structVector}{Vector}} $\ast$vector)
\begin{DoxyCompactList}\small\item\em Frees the internal memory buffer of the vector. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{vector_8c_ab5e38bad2bc3f2cbf9f7b23f615545ee}{vector\+\_\+replace}} (\mbox{\hyperlink{structVector}{Vector}} $\ast$vector, \mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}} index, \mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}} count, const void $\ast$elems, \mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}} new\+\_\+count)
\begin{DoxyCompactList}\small\item\em Replace a range of elements in the vector with new elements. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyAuthor}{Author}
Tim Gabrikowski, Anton Tchekov 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
26.\+04.\+2023 
\end{DoxyDate}


Definition in file \mbox{\hyperlink{vector_8c_source}{vector.\+c}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{vector_8c_ae2ff8fa33ac906e41f31fd19a1f51acc}\label{vector_8c_ae2ff8fa33ac906e41f31fd19a1f51acc}} 
\index{vector.c@{vector.c}!\_next\_pot@{\_next\_pot}}
\index{\_next\_pot@{\_next\_pot}!vector.c@{vector.c}}
\doxysubsubsection{\texorpdfstring{\_next\_pot()}{\_next\_pot()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}} \+\_\+next\+\_\+pot (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}}}]{n }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Next power of two. 


\begin{DoxyParams}{Parameters}
{\em n} & The number for which to get the next bigger power of two for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The power of two, for example for input 26 it would return 32 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{vector_8c_source_l00019}{19}} of file \mbox{\hyperlink{vector_8c_source}{vector.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00020\ \{}
\DoxyCodeLine{00021\ \ \ \ \ \mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}}\ power\ =\ 1;}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keywordflow}{while}(power\ <\ n)}
\DoxyCodeLine{00023\ \ \ \ \ \{}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ power\ <<=\ 1;}
\DoxyCodeLine{00025\ \ \ \ \ \}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordflow}{return}\ power;}
\DoxyCodeLine{00028\ \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{vector_8c_source_l00043}{vector\+\_\+replace()}}.

\mbox{\Hypertarget{vector_8c_a0c0be12f800dc5bc6777b4ff324f41ca}\label{vector_8c_a0c0be12f800dc5bc6777b4ff324f41ca}} 
\index{vector.c@{vector.c}!vector\_destroy@{vector\_destroy}}
\index{vector\_destroy@{vector\_destroy}!vector.c@{vector.c}}
\doxysubsubsection{\texorpdfstring{vector\_destroy()}{vector\_destroy()}}
{\footnotesize\ttfamily void vector\+\_\+destroy (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structVector}{Vector}} $\ast$}]{vector }\end{DoxyParamCaption})}



Frees the internal memory buffer of the vector. 


\begin{DoxyParams}{Parameters}
{\em vector} & The vector \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{vector_8c_source_l00038}{38}} of file \mbox{\hyperlink{vector_8c_source}{vector.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00039\ \{}
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{alloc_8c_ab0b733d6d48d9eafd86d2196d16e2bc4}{memfree}}(vector-\/>\mbox{\hyperlink{structVector_a3c3c5b59d45fcf97bd75f79657df4b25}{Data}});}
\DoxyCodeLine{00041\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{vector_8h_source_l00028}{Vector\+::\+Data}}, and \mbox{\hyperlink{alloc_8c_source_l00160}{memfree()}}.

\mbox{\Hypertarget{vector_8c_a9618b41b25efb749069cbfff9c3cadcf}\label{vector_8c_a9618b41b25efb749069cbfff9c3cadcf}} 
\index{vector.c@{vector.c}!vector\_init@{vector\_init}}
\index{vector\_init@{vector\_init}!vector.c@{vector.c}}
\doxysubsubsection{\texorpdfstring{vector\_init()}{vector\_init()}}
{\footnotesize\ttfamily void vector\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structVector}{Vector}} $\ast$}]{vector,  }\item[{\mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}}}]{element\+\_\+size,  }\item[{\mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}}}]{initial\+\_\+capacity }\end{DoxyParamCaption})}



Initialize a vector with an element size and an initial capacity. 

Example code for a vector of integers\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{structVector}{Vector}}\ vector;}
\DoxyCodeLine{\mbox{\hyperlink{vector_8c_a9618b41b25efb749069cbfff9c3cadcf}{vector\_init}}(\&vector,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{types_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}}),\ 16);}

\end{DoxyCode}



\begin{DoxyParams}{Parameters}
{\em vector} & The vector \\
\hline
{\em element\+\_\+size} & The size of each element in the vector \\
\hline
{\em initial\+\_\+capacity} & The vectors initial capacity \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{vector_8c_source_l00030}{30}} of file \mbox{\hyperlink{vector_8c_source}{vector.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00031\ \{}
\DoxyCodeLine{00032\ \ \ \ \ vector-\/>\mbox{\hyperlink{structVector_aaecd5236c979a9c75131c2d391e44cc6}{ElementSize}}\ =\ element\_size;}
\DoxyCodeLine{00033\ \ \ \ \ vector-\/>\mbox{\hyperlink{structVector_af9abb7483a64efea81def7fbf714ba60}{Capacity}}\ =\ initial\_capacity;}
\DoxyCodeLine{00034\ \ \ \ \ vector-\/>\mbox{\hyperlink{structVector_ac6aa25a7a7bc6353a0fada595c85ea2e}{Length}}\ =\ 0;}
\DoxyCodeLine{00035\ \ \ \ \ vector-\/>\mbox{\hyperlink{structVector_a3c3c5b59d45fcf97bd75f79657df4b25}{Data}}\ =\ \mbox{\hyperlink{alloc_8c_a4be51fa4dd80d0b7077779261722119a}{memalloc}}(element\_size\ *\ initial\_capacity);}
\DoxyCodeLine{00036\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{vector_8h_source_l00025}{Vector\+::\+Capacity}}, \mbox{\hyperlink{vector_8h_source_l00028}{Vector\+::\+Data}}, \mbox{\hyperlink{vector_8h_source_l00019}{Vector\+::\+Element\+Size}}, \mbox{\hyperlink{vector_8h_source_l00022}{Vector\+::\+Length}}, and \mbox{\hyperlink{alloc_8c_source_l00104}{memalloc()}}.



Referenced by \mbox{\hyperlink{clipboard_8c_source_l00021}{\+\_\+clipboard\+\_\+init()}}, \mbox{\hyperlink{gui_8c_source_l00879}{input\+\_\+init()}}, and \mbox{\hyperlink{apps_2editor_2main_8c_source_l00289}{setup()}}.

\mbox{\Hypertarget{vector_8c_ab5e38bad2bc3f2cbf9f7b23f615545ee}\label{vector_8c_ab5e38bad2bc3f2cbf9f7b23f615545ee}} 
\index{vector.c@{vector.c}!vector\_replace@{vector\_replace}}
\index{vector\_replace@{vector\_replace}!vector.c@{vector.c}}
\doxysubsubsection{\texorpdfstring{vector\_replace()}{vector\_replace()}}
{\footnotesize\ttfamily void vector\+\_\+replace (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structVector}{Vector}} $\ast$}]{vector,  }\item[{\mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}}}]{index,  }\item[{\mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}}}]{count,  }\item[{const void $\ast$}]{elems,  }\item[{\mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}}}]{new\+\_\+count }\end{DoxyParamCaption})}



Replace a range of elements in the vector with new elements. 


\begin{DoxyParams}{Parameters}
{\em vector} & The vector \\
\hline
{\em index} & The starting index of the range of elements to replace \\
\hline
{\em count} & The number of elements to replace \\
\hline
{\em elems} & Pointer to the new elements \\
\hline
{\em new\+\_\+count} & Number of new elements to be inserted \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{vector_8c_source_l00043}{43}} of file \mbox{\hyperlink{vector_8c_source}{vector.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00045\ \{}
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}}\ new\_length,\ element\_size;}
\DoxyCodeLine{00047\ \ \ \ \ element\_size\ =\ vector-\/>\mbox{\hyperlink{structVector_aaecd5236c979a9c75131c2d391e44cc6}{ElementSize}};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{panic_8h_ac6c818ab7aca2e521c97eee817f99f91}{ASSERT}}(index\ +\ count\ <=\ vector-\/>Length,\ \textcolor{stringliteral}{"{}invalid\ range"{}});}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{comment}{/*\ Calculate\ new\ number\ of\ elements\ */}}
\DoxyCodeLine{00052\ \ \ \ \ new\_length\ =\ vector-\/>\mbox{\hyperlink{structVector_ac6aa25a7a7bc6353a0fada595c85ea2e}{Length}}\ -\/\ count\ +\ new\_count;}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordflow}{if}(new\_length\ >\ vector-\/>\mbox{\hyperlink{structVector_af9abb7483a64efea81def7fbf714ba60}{Capacity}})}
\DoxyCodeLine{00054\ \ \ \ \ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Resize\ necessary\ */}}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}}\ new\_capacity,\ prev\_bytes,\ new\_bytes,\ old\_bytes,\ last\_bytes;}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *new\_data;}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ new\_capacity\ =\ \mbox{\hyperlink{vector_8c_ae2ff8fa33ac906e41f31fd19a1f51acc}{\_next\_pot}}(new\_length);}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ prev\_bytes\ =\ index\ *\ element\_size;}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ new\_bytes\ =\ new\_count\ *\ element\_size;}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ old\_bytes\ =\ count\ *\ element\_size;}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ last\_bytes\ =\ (vector-\/>\mbox{\hyperlink{structVector_ac6aa25a7a7bc6353a0fada595c85ea2e}{Length}}\ -\/\ index\ -\/\ count)\ *\ element\_size;}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Calculate\ new\ capacity\ */}}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ vector-\/>\mbox{\hyperlink{structVector_af9abb7483a64efea81def7fbf714ba60}{Capacity}}\ =\ new\_capacity;}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Create\ new\ buffer\ */}}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ new\_data\ =\ \mbox{\hyperlink{alloc_8c_a4be51fa4dd80d0b7077779261722119a}{memalloc}}(new\_capacity\ *\ element\_size);}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Copy\ first\ part\ from\ previous\ buffer\ */}}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{string_8c_a6ea826c42748b85ae7c74f1e2ccf7c27}{memcpy}}(new\_data,\ vector-\/>\mbox{\hyperlink{structVector_a3c3c5b59d45fcf97bd75f79657df4b25}{Data}},\ prev\_bytes);\ \textcolor{comment}{//\ correct}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Copy\ new\ range\ */}}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{string_8c_a6ea826c42748b85ae7c74f1e2ccf7c27}{memcpy}}((\mbox{\hyperlink{types_8h_a92c50087ca0e64fa93fc59402c55f8ca}{u8}}\ *)new\_data\ +\ prev\_bytes,\ elems,\ new\_bytes);\ \textcolor{comment}{//\ correct}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Copy\ last\ part\ */}}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{string_8c_a6ea826c42748b85ae7c74f1e2ccf7c27}{memcpy}}((\mbox{\hyperlink{types_8h_a92c50087ca0e64fa93fc59402c55f8ca}{u8}}\ *)new\_data\ +\ prev\_bytes\ +\ new\_bytes,}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{types_8h_a92c50087ca0e64fa93fc59402c55f8ca}{u8}}\ *)vector-\/>\mbox{\hyperlink{structVector_a3c3c5b59d45fcf97bd75f79657df4b25}{Data}}\ +\ prev\_bytes\ +\ old\_bytes,}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ last\_bytes);}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Replace\ with\ new\ buffer\ */}}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{alloc_8c_ab0b733d6d48d9eafd86d2196d16e2bc4}{memfree}}(vector-\/>\mbox{\hyperlink{structVector_a3c3c5b59d45fcf97bd75f79657df4b25}{Data}});}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ vector-\/>\mbox{\hyperlink{structVector_a3c3c5b59d45fcf97bd75f79657df4b25}{Data}}\ =\ new\_data;}
\DoxyCodeLine{00085\ \ \ \ \ \}}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00087\ \ \ \ \ \{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{types_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}}\ prev\_bytes,\ new\_bytes,\ old\_bytes,\ last\_bytes;}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ prev\_bytes\ =\ index\ *\ element\_size;}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ new\_bytes\ =\ new\_count\ *\ element\_size;}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ old\_bytes\ =\ count\ *\ element\_size;}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ last\_bytes\ =\ (vector-\/>\mbox{\hyperlink{structVector_ac6aa25a7a7bc6353a0fada595c85ea2e}{Length}}\ -\/\ index\ -\/\ count)\ *\ element\_size;}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Shift\ last\ part\ */}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{string_8c_aff3234e5ebcd6a4ff32e5171ee7ac45a}{memmove}}((\mbox{\hyperlink{types_8h_a92c50087ca0e64fa93fc59402c55f8ca}{u8}}\ *)vector-\/>\mbox{\hyperlink{structVector_a3c3c5b59d45fcf97bd75f79657df4b25}{Data}}\ +\ prev\_bytes\ +\ new\_bytes,}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{types_8h_a92c50087ca0e64fa93fc59402c55f8ca}{u8}}\ *)vector-\/>\mbox{\hyperlink{structVector_a3c3c5b59d45fcf97bd75f79657df4b25}{Data}}\ +\ prev\_bytes\ +\ old\_bytes,}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ last\_bytes);}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Copy\ new\ range\ */}}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{string_8c_a6ea826c42748b85ae7c74f1e2ccf7c27}{memcpy}}((\mbox{\hyperlink{types_8h_a92c50087ca0e64fa93fc59402c55f8ca}{u8}}\ *)vector-\/>\mbox{\hyperlink{structVector_a3c3c5b59d45fcf97bd75f79657df4b25}{Data}}\ +\ prev\_bytes,\ elems,\ new\_bytes);}
\DoxyCodeLine{00102\ \ \ \ \ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \ \ vector-\/>\mbox{\hyperlink{structVector_ac6aa25a7a7bc6353a0fada595c85ea2e}{Length}}\ =\ new\_length;}
\DoxyCodeLine{00105\ \}}

\end{DoxyCode}


References \mbox{\hyperlink{vector_8c_source_l00019}{\+\_\+next\+\_\+pot()}}, \mbox{\hyperlink{panic_8h_source_l00040}{ASSERT}}, \mbox{\hyperlink{vector_8h_source_l00025}{Vector\+::\+Capacity}}, \mbox{\hyperlink{vector_8h_source_l00028}{Vector\+::\+Data}}, \mbox{\hyperlink{vector_8h_source_l00019}{Vector\+::\+Element\+Size}}, \mbox{\hyperlink{vector_8h_source_l00022}{Vector\+::\+Length}}, \mbox{\hyperlink{alloc_8c_source_l00104}{memalloc()}}, \mbox{\hyperlink{string_8c_source_l00094}{memcpy()}}, \mbox{\hyperlink{alloc_8c_source_l00160}{memfree()}}, and \mbox{\hyperlink{string_8c_source_l00113}{memmove()}}.



Referenced by \mbox{\hyperlink{gui_8c_source_l00308}{input\+\_\+selection\+\_\+replace()}}, \mbox{\hyperlink{vector_8h_source_l00131}{vector\+\_\+insert\+\_\+range()}}, \mbox{\hyperlink{vector_8h_source_l00156}{vector\+\_\+remove\+\_\+range()}}, and \mbox{\hyperlink{vector_8h_source_l00084}{vector\+\_\+set()}}.

