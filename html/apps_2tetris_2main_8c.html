<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OS Dev: apps/tetris/main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">OS Dev<span id="projectnumber">&#160;0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9654b8d08f4bba4e84b362c5fd320bee.html">apps</a></li><li class="navelem"><a class="el" href="dir_aff07346b39a5b724d8e90764db338de.html">tetris</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Tetris game for the OS.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="std_8h_source.html">std.h</a>&gt;</code><br />
</div>
<p><a href="apps_2tetris_2main_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPiece.html">Piece</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPieceData.html">PieceData</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a313353b53d609b3b2b37e1aecf98bf4c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:a313353b53d609b3b2b37e1aecf98bf4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90b3ddaf01d4c39af0567b4500e9c4c6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a90b3ddaf01d4c39af0567b4500e9c4c6">FIELD_HEIGHT</a>&#160;&#160;&#160;20</td></tr>
<tr class="separator:a90b3ddaf01d4c39af0567b4500e9c4c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49d2668adfdf4f710a6c58fdbc0bcbe6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a49d2668adfdf4f710a6c58fdbc0bcbe6">FIELD_SIZE</a>&#160;&#160;&#160;(<a class="el" href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a> * <a class="el" href="apps_2tetris_2main_8c.html#a90b3ddaf01d4c39af0567b4500e9c4c6">FIELD_HEIGHT</a>)</td></tr>
<tr class="separator:a49d2668adfdf4f710a6c58fdbc0bcbe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad51ded0bbd705f02f73fc60c0b721ced"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a>&#160;&#160;&#160;20</td></tr>
<tr class="separator:ad51ded0bbd705f02f73fc60c0b721ced"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dd63073e02e2b072414b6bf3cdf57d6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a8dd63073e02e2b072414b6bf3cdf57d6">FALL_SPEED_DEFAULT</a>&#160;&#160;&#160;200</td></tr>
<tr class="separator:a8dd63073e02e2b072414b6bf3cdf57d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4b7f297dae8ab980841cd5ecdb93ee8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#aa4b7f297dae8ab980841cd5ecdb93ee8">FALL_SPEED_FAST</a>&#160;&#160;&#160;30</td></tr>
<tr class="separator:aa4b7f297dae8ab980841cd5ecdb93ee8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3adf7b7b13572f2baf3379a8f2f4220a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a3adf7b7b13572f2baf3379a8f2f4220a">WINDOW_TITLE</a>&#160;&#160;&#160;&quot;Tetris&quot;</td></tr>
<tr class="separator:a3adf7b7b13572f2baf3379a8f2f4220a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a799b04d03f49612e3e636b56c3972b80"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a799b04d03f49612e3e636b56c3972b80">STATUS_RUNNING</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a799b04d03f49612e3e636b56c3972b80"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a48e0eca677ce0a3de1dc2f2ea612cb19"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="types_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a48e0eca677ce0a3de1dc2f2ea612cb19">FieldType</a></td></tr>
<tr class="separator:a48e0eca677ce0a3de1dc2f2ea612cb19"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a12ed9719bbdf7bc596ff7a6f4bf3f021"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a12ed9719bbdf7bc596ff7a6f4bf3f021">PieceType</a> { <br />
&#160;&#160;<b>I</b>
, <b>J</b>
, <b>L</b>
, <b>O</b>
, <br />
&#160;&#160;<b>S</b>
, <b>T</b>
, <b>Z</b>
<br />
 }</td></tr>
<tr class="separator:a12ed9719bbdf7bc596ff7a6f4bf3f021"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7c2806ca944c2472b5e1d9234fc6fce7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a7c2806ca944c2472b5e1d9234fc6fce7">_field_get</a> (<a class="el" href="apps_2tetris_2main_8c.html#a48e0eca677ce0a3de1dc2f2ea612cb19">FieldType</a> *field, <a class="el" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a> x, <a class="el" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a> y)</td></tr>
<tr class="memdesc:a7c2806ca944c2472b5e1d9234fc6fce7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the piece at a position inside a field.  <br /></td></tr>
<tr class="separator:a7c2806ca944c2472b5e1d9234fc6fce7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6859d50f3303a4d278f0e97438fa1854"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a6859d50f3303a4d278f0e97438fa1854">_field_shift</a> (<a class="el" href="apps_2tetris_2main_8c.html#a48e0eca677ce0a3de1dc2f2ea612cb19">FieldType</a> *field, <a class="el" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a> row)</td></tr>
<tr class="memdesc:a6859d50f3303a4d278f0e97438fa1854"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear a row and shift down rows above.  <br /></td></tr>
<tr class="separator:a6859d50f3303a4d278f0e97438fa1854"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf863a16219a55882b73716b8ee2b8b8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#adf863a16219a55882b73716b8ee2b8b8">_field_rows</a> (<a class="el" href="apps_2tetris_2main_8c.html#a48e0eca677ce0a3de1dc2f2ea612cb19">FieldType</a> *field)</td></tr>
<tr class="memdesc:adf863a16219a55882b73716b8ee2b8b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove full rows and update score.  <br /></td></tr>
<tr class="separator:adf863a16219a55882b73716b8ee2b8b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63512b1efd6d377245329f587094f300"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a63512b1efd6d377245329f587094f300">_draw_grid</a> (void)</td></tr>
<tr class="memdesc:a63512b1efd6d377245329f587094f300"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draw field grid.  <br /></td></tr>
<tr class="separator:a63512b1efd6d377245329f587094f300"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fe5892e2d197c0c60dfaaa2559f64ae"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="apps_2tetris_2main_8c.html#a12ed9719bbdf7bc596ff7a6f4bf3f021">PieceType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a8fe5892e2d197c0c60dfaaa2559f64ae">_new_piece</a> (<a class="el" href="structPiece.html">Piece</a> *p)</td></tr>
<tr class="memdesc:a8fe5892e2d197c0c60dfaaa2559f64ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the next random tetris piece.  <br /></td></tr>
<tr class="separator:a8fe5892e2d197c0c60dfaaa2559f64ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa6a85d7ceaf4d7c8e3b17881258b6e3"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#afa6a85d7ceaf4d7c8e3b17881258b6e3">_valid_position</a> (<a class="el" href="apps_2tetris_2main_8c.html#a48e0eca677ce0a3de1dc2f2ea612cb19">FieldType</a> *field, <a class="el" href="structPiece.html">Piece</a> *p)</td></tr>
<tr class="memdesc:afa6a85d7ceaf4d7c8e3b17881258b6e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the position of a piece is valid, meaning that it is not outside of the frame and not colliding with pieces on the field.  <br /></td></tr>
<tr class="separator:afa6a85d7ceaf4d7c8e3b17881258b6e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a179f7e3f493ed0a3bdf1bc11907e8c98"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a179f7e3f493ed0a3bdf1bc11907e8c98">_to_field</a> (<a class="el" href="apps_2tetris_2main_8c.html#a48e0eca677ce0a3de1dc2f2ea612cb19">FieldType</a> *field, <a class="el" href="structPiece.html">Piece</a> *p)</td></tr>
<tr class="memdesc:a179f7e3f493ed0a3bdf1bc11907e8c98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Place a piece into a field.  <br /></td></tr>
<tr class="separator:a179f7e3f493ed0a3bdf1bc11907e8c98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade05f2059114427e9bcbc708760f5da3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#ade05f2059114427e9bcbc708760f5da3">_draw_field</a> (void)</td></tr>
<tr class="memdesc:ade05f2059114427e9bcbc708760f5da3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draw the tetris field to the screen.  <br /></td></tr>
<tr class="separator:ade05f2059114427e9bcbc708760f5da3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5305db9ea018cc40d167b2a51d77ac1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#af5305db9ea018cc40d167b2a51d77ac1">event_key</a> (<a class="el" href="keyboard-shared_8h.html#a48752551c4279f8cddf3585f8272092a">Key</a> key, <a class="el" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a> chr, <a class="el" href="keyboard-shared_8h.html#a7e51438e5f6bf556512ce7103cddac09">KeyState</a> state)</td></tr>
<tr class="memdesc:af5305db9ea018cc40d167b2a51d77ac1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main key event handler.  <br /></td></tr>
<tr class="separator:af5305db9ea018cc40d167b2a51d77ac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dfd9b79bc5a37d7df40207afbc5431f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a7dfd9b79bc5a37d7df40207afbc5431f">setup</a> (void)</td></tr>
<tr class="memdesc:a7dfd9b79bc5a37d7df40207afbc5431f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main setup function, initialize game.  <br /></td></tr>
<tr class="separator:a7dfd9b79bc5a37d7df40207afbc5431f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b33edabd7f1c4e4a0bf32c67269be2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a0b33edabd7f1c4e4a0bf32c67269be2f">loop</a> (void)</td></tr>
<tr class="memdesc:a0b33edabd7f1c4e4a0bf32c67269be2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main game loop, update state.  <br /></td></tr>
<tr class="separator:a0b33edabd7f1c4e4a0bf32c67269be2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a975dd0ea903eaee5b01dc8fa1f03cc21"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structPieceData.html">PieceData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a975dd0ea903eaee5b01dc8fa1f03cc21">Pieces</a> []</td></tr>
<tr class="separator:a975dd0ea903eaee5b01dc8fa1f03cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a484db87782841a7763d17ef82d344de1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structPiece.html">Piece</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a></td></tr>
<tr class="separator:a484db87782841a7763d17ef82d344de1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66a310b0917a56120d5eec8c86066461"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structPiece.html">Piece</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a66a310b0917a56120d5eec8c86066461">_np</a></td></tr>
<tr class="separator:a66a310b0917a56120d5eec8c86066461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cdf6e6db875a442f3ab6db542bd2bb5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="status_8h.html#a67a0db04d321a74b7e7fcfd3f1a3f70b">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a6cdf6e6db875a442f3ab6db542bd2bb5">_status</a></td></tr>
<tr class="separator:a6cdf6e6db875a442f3ab6db542bd2bb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b61dc076d66b07a466af8d80eb02283"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a3b61dc076d66b07a466af8d80eb02283">_ticks_update</a> = <a class="el" href="apps_2tetris_2main_8c.html#a8dd63073e02e2b072414b6bf3cdf57d6">FALL_SPEED_DEFAULT</a></td></tr>
<tr class="separator:a3b61dc076d66b07a466af8d80eb02283"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bd315b7f7932213204e50b823729896"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a3bd315b7f7932213204e50b823729896">_changed</a></td></tr>
<tr class="separator:a3bd315b7f7932213204e50b823729896"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a712087fe8401cc72eeea97bf20629aef"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="apps_2tetris_2main_8c.html#a48e0eca677ce0a3de1dc2f2ea612cb19">FieldType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="apps_2tetris_2main_8c.html#a712087fe8401cc72eeea97bf20629aef">_field</a> [<a class="el" href="apps_2tetris_2main_8c.html#a49d2668adfdf4f710a6c58fdbc0bcbe6">FIELD_SIZE</a>]</td></tr>
<tr class="separator:a712087fe8401cc72eeea97bf20629aef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Tetris game for the OS. </p>
<dl class="section author"><dt>Author</dt><dd>Anton Tchekov </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>24.05.2023 </dd></dl>

<p class="definition">Definition in file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad51ded0bbd705f02f73fc60c0b721ced" name="ad51ded0bbd705f02f73fc60c0b721ced"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad51ded0bbd705f02f73fc60c0b721ced">&#9670;&#160;</a></span>BLOCK_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BLOCK_SIZE&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Size of each block in pixels </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00021">21</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="a8dd63073e02e2b072414b6bf3cdf57d6" name="a8dd63073e02e2b072414b6bf3cdf57d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dd63073e02e2b072414b6bf3cdf57d6">&#9670;&#160;</a></span>FALL_SPEED_DEFAULT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FALL_SPEED_DEFAULT&#160;&#160;&#160;200</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Default falling speed in milliseconds </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00024">24</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="aa4b7f297dae8ab980841cd5ecdb93ee8" name="aa4b7f297dae8ab980841cd5ecdb93ee8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4b7f297dae8ab980841cd5ecdb93ee8">&#9670;&#160;</a></span>FALL_SPEED_FAST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FALL_SPEED_FAST&#160;&#160;&#160;30</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Falling speed when down button is pressed </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00027">27</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="a90b3ddaf01d4c39af0567b4500e9c4c6" name="a90b3ddaf01d4c39af0567b4500e9c4c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90b3ddaf01d4c39af0567b4500e9c4c6">&#9670;&#160;</a></span>FIELD_HEIGHT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIELD_HEIGHT&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Field height in blocks </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00015">15</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="a49d2668adfdf4f710a6c58fdbc0bcbe6" name="a49d2668adfdf4f710a6c58fdbc0bcbe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49d2668adfdf4f710a6c58fdbc0bcbe6">&#9670;&#160;</a></span>FIELD_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIELD_SIZE&#160;&#160;&#160;(<a class="el" href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a> * <a class="el" href="apps_2tetris_2main_8c.html#a90b3ddaf01d4c39af0567b4500e9c4c6">FIELD_HEIGHT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Field size in blocks </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00018">18</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="a313353b53d609b3b2b37e1aecf98bf4c" name="a313353b53d609b3b2b37e1aecf98bf4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a313353b53d609b3b2b37e1aecf98bf4c">&#9670;&#160;</a></span>FIELD_WIDTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIELD_WIDTH&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Field width in blocks </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00012">12</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="a799b04d03f49612e3e636b56c3972b80" name="a799b04d03f49612e3e636b56c3972b80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a799b04d03f49612e3e636b56c3972b80">&#9670;&#160;</a></span>STATUS_RUNNING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STATUS_RUNNING&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Game state: running </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00033">33</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a id="a3adf7b7b13572f2baf3379a8f2f4220a" name="a3adf7b7b13572f2baf3379a8f2f4220a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3adf7b7b13572f2baf3379a8f2f4220a">&#9670;&#160;</a></span>WINDOW_TITLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WINDOW_TITLE&#160;&#160;&#160;&quot;Tetris&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="structWindow.html">Window</a> title string </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00030">30</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a48e0eca677ce0a3de1dc2f2ea612cb19" name="a48e0eca677ce0a3de1dc2f2ea612cb19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48e0eca677ce0a3de1dc2f2ea612cb19">&#9670;&#160;</a></span>FieldType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="types_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> <a class="el" href="apps_2tetris_2main_8c.html#a48e0eca677ce0a3de1dc2f2ea612cb19">FieldType</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>VARIABLES Type that stores what piece type a tile in a field belongs to </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00107">107</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a12ed9719bbdf7bc596ff7a6f4bf3f021" name="a12ed9719bbdf7bc596ff7a6f4bf3f021"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12ed9719bbdf7bc596ff7a6f4bf3f021">&#9670;&#160;</a></span>PieceType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="apps_2tetris_2main_8c.html#a12ed9719bbdf7bc596ff7a6f4bf3f021">PieceType</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="structPiece.html">Piece</a> Type </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00036">36</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   36</span>{ I, J, L, O, S, T, Z } <a class="code hl_enumeration" href="apps_2tetris_2main_8c.html#a12ed9719bbdf7bc596ff7a6f4bf3f021">PieceType</a>;</div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a12ed9719bbdf7bc596ff7a6f4bf3f021"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a12ed9719bbdf7bc596ff7a6f4bf3f021">PieceType</a></div><div class="ttdeci">PieceType</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00036">main.c:36</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ade05f2059114427e9bcbc708760f5da3" name="ade05f2059114427e9bcbc708760f5da3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade05f2059114427e9bcbc708760f5da3">&#9670;&#160;</a></span>_draw_field()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void _draw_field </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Draw the tetris field to the screen. </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00317">317</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  318</span>{</div>
<div class="line"><span class="lineno">  319</span>    <span class="keyword">static</span> <a class="code hl_typedef" href="apps_2tetris_2main_8c.html#a48e0eca677ce0a3de1dc2f2ea612cb19">FieldType</a> <span class="keyword">new</span>[<a class="code hl_define" href="apps_2tetris_2main_8c.html#a49d2668adfdf4f710a6c58fdbc0bcbe6">FIELD_SIZE</a>], prev[<a class="code hl_define" href="apps_2tetris_2main_8c.html#a49d2668adfdf4f710a6c58fdbc0bcbe6">FIELD_SIZE</a>];</div>
<div class="line"><span class="lineno">  320</span>    <a class="code hl_typedef" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a> x, y, offset;</div>
<div class="line"><span class="lineno">  321</span>    <a class="code hl_enumeration" href="apps_2tetris_2main_8c.html#a12ed9719bbdf7bc596ff7a6f4bf3f021">PieceType</a> type;</div>
<div class="line"><span class="lineno">  322</span> </div>
<div class="line"><span class="lineno">  323</span>    <a class="code hl_function" href="string_8c.html#a6ea826c42748b85ae7c74f1e2ccf7c27">memcpy</a>(<span class="keyword">new</span>, <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a712087fe8401cc72eeea97bf20629aef">_field</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a712087fe8401cc72eeea97bf20629aef">_field</a>));</div>
<div class="line"><span class="lineno">  324</span>    <a class="code hl_function" href="apps_2tetris_2main_8c.html#a179f7e3f493ed0a3bdf1bc11907e8c98">_to_field</a>(<span class="keyword">new</span>, &amp;<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>);</div>
<div class="line"><span class="lineno">  325</span>    <span class="comment">//_to_field(new, &amp;_np);</span></div>
<div class="line"><span class="lineno">  326</span>    <span class="keywordflow">for</span>(y = 0; y &lt; <a class="code hl_define" href="apps_2tetris_2main_8c.html#a90b3ddaf01d4c39af0567b4500e9c4c6">FIELD_HEIGHT</a>; ++y)</div>
<div class="line"><span class="lineno">  327</span>    {</div>
<div class="line"><span class="lineno">  328</span>        <span class="keywordflow">for</span>(x = 0; x &lt; <a class="code hl_define" href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a>; ++x)</div>
<div class="line"><span class="lineno">  329</span>        {</div>
<div class="line"><span class="lineno">  330</span>            offset = y * <a class="code hl_define" href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a> + x;</div>
<div class="line"><span class="lineno">  331</span>            type = <span class="keyword">new</span>[offset];</div>
<div class="line"><span class="lineno">  332</span>            <a class="code hl_typedef" href="gfx-types_8h.html#acbbccb6085c654282ef64cdcefc81be5">Color</a> color = type ? <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a975dd0ea903eaee5b01dc8fa1f03cc21">Pieces</a>[type - 1].<a class="code hl_variable" href="structPieceData.html#ae4b53d0c13616cfde02acbd0667f0ead">Fill</a> : <a class="code hl_define" href="lcd_8h.html#aba2a7fe77a7501e5844370eec0185207">COLOR_BLACK</a>;</div>
<div class="line"><span class="lineno">  333</span>            <span class="keywordflow">if</span>(type != prev[offset])</div>
<div class="line"><span class="lineno">  334</span>            {</div>
<div class="line"><span class="lineno">  335</span>                <a class="code hl_function" href="gfx_8c.html#a61d70a4550bf181cd71bfc9a4f12a6d1">gfx_rect</a>(</div>
<div class="line"><span class="lineno">  336</span>                    x * <a class="code hl_define" href="apps_2tetris_2main_8c.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a> + 1,</div>
<div class="line"><span class="lineno">  337</span>                    y * <a class="code hl_define" href="apps_2tetris_2main_8c.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a> + 1,</div>
<div class="line"><span class="lineno">  338</span>                    <a class="code hl_define" href="apps_2tetris_2main_8c.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a> - 1,</div>
<div class="line"><span class="lineno">  339</span>                    <a class="code hl_define" href="apps_2tetris_2main_8c.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a> - 1,</div>
<div class="line"><span class="lineno">  340</span>                    color);</div>
<div class="line"><span class="lineno">  341</span>            }</div>
<div class="line"><span class="lineno">  342</span>        }</div>
<div class="line"><span class="lineno">  343</span>    }</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>    <a class="code hl_function" href="string_8c.html#a6ea826c42748b85ae7c74f1e2ccf7c27">memcpy</a>(prev, <span class="keyword">new</span>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a712087fe8401cc72eeea97bf20629aef">_field</a>));</div>
<div class="line"><span class="lineno">  346</span>}</div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a179f7e3f493ed0a3bdf1bc11907e8c98"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a179f7e3f493ed0a3bdf1bc11907e8c98">_to_field</a></div><div class="ttdeci">static void _to_field(FieldType *field, Piece *p)</div><div class="ttdoc">Place a piece into a field.</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00289">main.c:289</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a313353b53d609b3b2b37e1aecf98bf4c"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a></div><div class="ttdeci">#define FIELD_WIDTH</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00012">main.c:12</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a484db87782841a7763d17ef82d344de1"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a></div><div class="ttdeci">static Piece _cp</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00110">main.c:110</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a48e0eca677ce0a3de1dc2f2ea612cb19"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a48e0eca677ce0a3de1dc2f2ea612cb19">FieldType</a></div><div class="ttdeci">u8 FieldType</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00107">main.c:107</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a49d2668adfdf4f710a6c58fdbc0bcbe6"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a49d2668adfdf4f710a6c58fdbc0bcbe6">FIELD_SIZE</a></div><div class="ttdeci">#define FIELD_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00018">main.c:18</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a712087fe8401cc72eeea97bf20629aef"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a712087fe8401cc72eeea97bf20629aef">_field</a></div><div class="ttdeci">static FieldType _field[FIELD_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00125">main.c:125</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a90b3ddaf01d4c39af0567b4500e9c4c6"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a90b3ddaf01d4c39af0567b4500e9c4c6">FIELD_HEIGHT</a></div><div class="ttdeci">#define FIELD_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00015">main.c:15</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a975dd0ea903eaee5b01dc8fa1f03cc21"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a975dd0ea903eaee5b01dc8fa1f03cc21">Pieces</a></div><div class="ttdeci">const PieceData Pieces[]</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00065">main.c:65</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_ad51ded0bbd705f02f73fc60c0b721ced"><div class="ttname"><a href="apps_2tetris_2main_8c.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a></div><div class="ttdeci">#define BLOCK_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00021">main.c:21</a></div></div>
<div class="ttc" id="agfx-types_8h_html_acbbccb6085c654282ef64cdcefc81be5"><div class="ttname"><a href="gfx-types_8h.html#acbbccb6085c654282ef64cdcefc81be5">Color</a></div><div class="ttdeci">u32 Color</div><div class="ttdef"><b>Definition:</b> <a href="gfx-types_8h_source.html#l00013">gfx-types.h:13</a></div></div>
<div class="ttc" id="agfx_8c_html_a61d70a4550bf181cd71bfc9a4f12a6d1"><div class="ttname"><a href="gfx_8c.html#a61d70a4550bf181cd71bfc9a4f12a6d1">gfx_rect</a></div><div class="ttdeci">void gfx_rect(i32 x, i32 y, i32 w, i32 h, Color color)</div><div class="ttdoc">Draws a rectangle from position (x|y), w pixels to left and h pixels down.</div><div class="ttdef"><b>Definition:</b> <a href="gfx_8c_source.html#l00011">gfx.c:11</a></div></div>
<div class="ttc" id="alcd_8h_html_aba2a7fe77a7501e5844370eec0185207"><div class="ttname"><a href="lcd_8h.html#aba2a7fe77a7501e5844370eec0185207">COLOR_BLACK</a></div><div class="ttdeci">#define COLOR_BLACK</div><div class="ttdef"><b>Definition:</b> <a href="lcd_8h_source.html#l00038">lcd.h:38</a></div></div>
<div class="ttc" id="astring_8c_html_a6ea826c42748b85ae7c74f1e2ccf7c27"><div class="ttname"><a href="string_8c.html#a6ea826c42748b85ae7c74f1e2ccf7c27">memcpy</a></div><div class="ttdeci">void * memcpy(void *dest, const void *src, u32 count)</div><div class="ttdoc">Copies count bytes from src to dest Source and destination blocks must NOT overlap.</div><div class="ttdef"><b>Definition:</b> <a href="string_8c_source.html#l00094">string.c:94</a></div></div>
<div class="ttc" id="astructPieceData_html_ae4b53d0c13616cfde02acbd0667f0ead"><div class="ttname"><a href="structPieceData.html#ae4b53d0c13616cfde02acbd0667f0ead">PieceData::Fill</a></div><div class="ttdeci">Color Fill</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00061">main.c:61</a></div></div>
<div class="ttc" id="atypes_8h_html_a48d6cd8e4135fb2ff7e7f2dac84089ec"><div class="ttname"><a href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a></div><div class="ttdeci">int32_t i32</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00020">types.h:20</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="apps_2tetris_2main_8c_source.html#l00110">_cp</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00125">_field</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00289">_to_field()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00021">BLOCK_SIZE</a>, <a class="el" href="lcd_8h_source.html#l00038">COLOR_BLACK</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00015">FIELD_HEIGHT</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00018">FIELD_SIZE</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00012">FIELD_WIDTH</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00061">PieceData::Fill</a>, <a class="el" href="gfx_8c_source.html#l00011">gfx_rect()</a>, <a class="el" href="string_8c_source.html#l00094">memcpy()</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00065">Pieces</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2tetris_2main_8c_source.html#l00433">loop()</a>.</p>

</div>
</div>
<a id="a63512b1efd6d377245329f587094f300" name="a63512b1efd6d377245329f587094f300"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63512b1efd6d377245329f587094f300">&#9670;&#160;</a></span>_draw_grid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void _draw_grid </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Draw field grid. </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00196">196</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  197</span>{</div>
<div class="line"><span class="lineno">  198</span>    <a class="code hl_typedef" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a> i;</div>
<div class="line"><span class="lineno">  199</span>    <span class="keywordflow">for</span>(i = 0; i &lt;= <a class="code hl_define" href="apps_2tetris_2main_8c.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a> * <a class="code hl_define" href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a>; i += <a class="code hl_define" href="apps_2tetris_2main_8c.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a>)</div>
<div class="line"><span class="lineno">  200</span>    {</div>
<div class="line"><span class="lineno">  201</span>        <a class="code hl_function" href="gfx_8c.html#a61d70a4550bf181cd71bfc9a4f12a6d1">gfx_rect</a>(i, 0, 1, <a class="code hl_define" href="apps_2tetris_2main_8c.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a> * <a class="code hl_define" href="apps_2tetris_2main_8c.html#a90b3ddaf01d4c39af0567b4500e9c4c6">FIELD_HEIGHT</a>, <a class="code hl_define" href="lcd_8h.html#a9b44987ffdc2af19b635206b94334b69">COLOR_WHITE</a>);</div>
<div class="line"><span class="lineno">  202</span>    }</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>    <span class="keywordflow">for</span>(i = 0; i &lt;= <a class="code hl_define" href="apps_2tetris_2main_8c.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a> * <a class="code hl_define" href="apps_2tetris_2main_8c.html#a90b3ddaf01d4c39af0567b4500e9c4c6">FIELD_HEIGHT</a>; i += <a class="code hl_define" href="apps_2tetris_2main_8c.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a>)</div>
<div class="line"><span class="lineno">  205</span>    {</div>
<div class="line"><span class="lineno">  206</span>        <a class="code hl_function" href="gfx_8c.html#a61d70a4550bf181cd71bfc9a4f12a6d1">gfx_rect</a>(0, i, <a class="code hl_define" href="apps_2tetris_2main_8c.html#ad51ded0bbd705f02f73fc60c0b721ced">BLOCK_SIZE</a> * <a class="code hl_define" href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a>, 1, <a class="code hl_define" href="lcd_8h.html#a9b44987ffdc2af19b635206b94334b69">COLOR_WHITE</a>);</div>
<div class="line"><span class="lineno">  207</span>    }</div>
<div class="line"><span class="lineno">  208</span>}</div>
<div class="ttc" id="alcd_8h_html_a9b44987ffdc2af19b635206b94334b69"><div class="ttname"><a href="lcd_8h.html#a9b44987ffdc2af19b635206b94334b69">COLOR_WHITE</a></div><div class="ttdeci">#define COLOR_WHITE</div><div class="ttdef"><b>Definition:</b> <a href="lcd_8h_source.html#l00035">lcd.h:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="apps_2tetris_2main_8c_source.html#l00021">BLOCK_SIZE</a>, <a class="el" href="lcd_8h_source.html#l00035">COLOR_WHITE</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00015">FIELD_HEIGHT</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00012">FIELD_WIDTH</a>, and <a class="el" href="gfx_8c_source.html#l00011">gfx_rect()</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2tetris_2main_8c_source.html#l00417">setup()</a>.</p>

</div>
</div>
<a id="a7c2806ca944c2472b5e1d9234fc6fce7" name="a7c2806ca944c2472b5e1d9234fc6fce7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c2806ca944c2472b5e1d9234fc6fce7">&#9670;&#160;</a></span>_field_get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a> _field_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="apps_2tetris_2main_8c.html#a48e0eca677ce0a3de1dc2f2ea612cb19">FieldType</a> *&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a>&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the piece at a position inside a field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field</td><td>The field </td></tr>
    <tr><td class="paramname">x</td><td>X-coordinate </td></tr>
    <tr><td class="paramname">y</td><td>Y-coordinate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00137">137</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  138</span>{</div>
<div class="line"><span class="lineno">  139</span>    <span class="keywordflow">return</span> (x &lt; 0 || x &gt;= <a class="code hl_define" href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a> || y &lt; 0 || y &gt;= <a class="code hl_define" href="apps_2tetris_2main_8c.html#a90b3ddaf01d4c39af0567b4500e9c4c6">FIELD_HEIGHT</a>) ? -1 :</div>
<div class="line"><span class="lineno">  140</span>        field[y * <a class="code hl_define" href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a> + x];</div>
<div class="line"><span class="lineno">  141</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="apps_2tetris_2main_8c_source.html#l00015">FIELD_HEIGHT</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00012">FIELD_WIDTH</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2tetris_2main_8c_source.html#l00257">_valid_position()</a>.</p>

</div>
</div>
<a id="adf863a16219a55882b73716b8ee2b8b8" name="adf863a16219a55882b73716b8ee2b8b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf863a16219a55882b73716b8ee2b8b8">&#9670;&#160;</a></span>_field_rows()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a> _field_rows </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="apps_2tetris_2main_8c.html#a48e0eca677ce0a3de1dc2f2ea612cb19">FieldType</a> *&#160;</td>
          <td class="paramname"><em>field</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove full rows and update score. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field</td><td>Playing field </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Score change </dd></dl>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00168">168</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  169</span>{</div>
<div class="line"><span class="lineno">  170</span>    <a class="code hl_typedef" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a> x, y, score;</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>    score = 0;</div>
<div class="line"><span class="lineno">  173</span>    <span class="keywordflow">for</span>(y = 0; y &lt; <a class="code hl_define" href="apps_2tetris_2main_8c.html#a90b3ddaf01d4c39af0567b4500e9c4c6">FIELD_HEIGHT</a>; ++y)</div>
<div class="line"><span class="lineno">  174</span>    {</div>
<div class="line"><span class="lineno">  175</span>        <span class="keywordflow">for</span>(x = 0; x &lt; <a class="code hl_define" href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a>; ++x)</div>
<div class="line"><span class="lineno">  176</span>        {</div>
<div class="line"><span class="lineno">  177</span>            <span class="keywordflow">if</span>(!field[y * <a class="code hl_define" href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a> + x])</div>
<div class="line"><span class="lineno">  178</span>            {</div>
<div class="line"><span class="lineno">  179</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  180</span>            }</div>
<div class="line"><span class="lineno">  181</span>        }</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>        <span class="keywordflow">if</span>(x == <a class="code hl_define" href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a>)</div>
<div class="line"><span class="lineno">  184</span>        {</div>
<div class="line"><span class="lineno">  185</span>            <a class="code hl_function" href="apps_2tetris_2main_8c.html#a6859d50f3303a4d278f0e97438fa1854">_field_shift</a>(field, y);</div>
<div class="line"><span class="lineno">  186</span>            score += 100;</div>
<div class="line"><span class="lineno">  187</span>        }</div>
<div class="line"><span class="lineno">  188</span>    }</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>    <span class="keywordflow">return</span> score;</div>
<div class="line"><span class="lineno">  191</span>}</div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a6859d50f3303a4d278f0e97438fa1854"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a6859d50f3303a4d278f0e97438fa1854">_field_shift</a></div><div class="ttdeci">static void _field_shift(FieldType *field, i32 row)</div><div class="ttdoc">Clear a row and shift down rows above.</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00149">main.c:149</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="apps_2tetris_2main_8c_source.html#l00149">_field_shift()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00015">FIELD_HEIGHT</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00012">FIELD_WIDTH</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2tetris_2main_8c_source.html#l00433">loop()</a>.</p>

</div>
</div>
<a id="a6859d50f3303a4d278f0e97438fa1854" name="a6859d50f3303a4d278f0e97438fa1854"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6859d50f3303a4d278f0e97438fa1854">&#9670;&#160;</a></span>_field_shift()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void _field_shift </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="apps_2tetris_2main_8c.html#a48e0eca677ce0a3de1dc2f2ea612cb19">FieldType</a> *&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a>&#160;</td>
          <td class="paramname"><em>row</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear a row and shift down rows above. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field</td><td>Playing field </td></tr>
    <tr><td class="paramname">row</td><td>The row to remove </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00149">149</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  150</span>{</div>
<div class="line"><span class="lineno">  151</span>    <a class="code hl_typedef" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a> x, y;</div>
<div class="line"><span class="lineno">  152</span>    <span class="keywordflow">for</span>(y = row; y &gt; 0; --y)</div>
<div class="line"><span class="lineno">  153</span>    {</div>
<div class="line"><span class="lineno">  154</span>        <span class="keywordflow">for</span>(x = 0; x &lt; <a class="code hl_define" href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a>; ++x)</div>
<div class="line"><span class="lineno">  155</span>        {</div>
<div class="line"><span class="lineno">  156</span>            field[y * <a class="code hl_define" href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a> + x] =</div>
<div class="line"><span class="lineno">  157</span>                field[(y - 1) * <a class="code hl_define" href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a> + x];</div>
<div class="line"><span class="lineno">  158</span>        }</div>
<div class="line"><span class="lineno">  159</span>    }</div>
<div class="line"><span class="lineno">  160</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="apps_2tetris_2main_8c_source.html#l00012">FIELD_WIDTH</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2tetris_2main_8c_source.html#l00168">_field_rows()</a>.</p>

</div>
</div>
<a id="a8fe5892e2d197c0c60dfaaa2559f64ae" name="a8fe5892e2d197c0c60dfaaa2559f64ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fe5892e2d197c0c60dfaaa2559f64ae">&#9670;&#160;</a></span>_new_piece()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="apps_2tetris_2main_8c.html#a12ed9719bbdf7bc596ff7a6f4bf3f021">PieceType</a> _new_piece </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPiece.html">Piece</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the next random tetris piece. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Output parameter for new piece </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structPiece.html">Piece</a> type of the following piece </dd></dl>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00216">216</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  217</span>{</div>
<div class="line"><span class="lineno">  218</span>    <span class="keyword">static</span> <a class="code hl_enumeration" href="apps_2tetris_2main_8c.html#a12ed9719bbdf7bc596ff7a6f4bf3f021">PieceType</a> next, bag[7];</div>
<div class="line"><span class="lineno">  219</span>    <span class="keyword">static</span> <a class="code hl_typedef" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a> idx = 6;</div>
<div class="line"><span class="lineno">  220</span> </div>
<div class="line"><span class="lineno">  221</span>    <span class="keywordflow">if</span>(idx == 6)</div>
<div class="line"><span class="lineno">  222</span>    {</div>
<div class="line"><span class="lineno">  223</span>        <span class="comment">/* create a new shuffled bag of pieces */</span></div>
<div class="line"><span class="lineno">  224</span>        <span class="keywordtype">int</span> i, j, tmp;</div>
<div class="line"><span class="lineno">  225</span>        <span class="keywordflow">for</span>(i = 0; i &lt; 7; ++i)</div>
<div class="line"><span class="lineno">  226</span>        {</div>
<div class="line"><span class="lineno">  227</span>            bag[i] = i;</div>
<div class="line"><span class="lineno">  228</span>        }</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span>        <span class="keywordflow">for</span>(i = 0; i &lt; 7; ++i)</div>
<div class="line"><span class="lineno">  231</span>        {</div>
<div class="line"><span class="lineno">  232</span>            j = <a class="code hl_function" href="rand_8c.html#a9eeb6c44d48cd8ace4b454da982406c9">rand</a>() % 7;</div>
<div class="line"><span class="lineno">  233</span>            tmp = bag[i];</div>
<div class="line"><span class="lineno">  234</span>            bag[i] = bag[j];</div>
<div class="line"><span class="lineno">  235</span>            bag[j] = tmp;</div>
<div class="line"><span class="lineno">  236</span>        }</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>        idx = 0;</div>
<div class="line"><span class="lineno">  239</span>    }</div>
<div class="line"><span class="lineno">  240</span> </div>
<div class="line"><span class="lineno">  241</span>    p-&gt;<a class="code hl_variable" href="structPiece.html#a3cddb7dc76f326558891036d46d5351b">X</a> = 4;</div>
<div class="line"><span class="lineno">  242</span>    p-&gt;<a class="code hl_variable" href="structPiece.html#aab10b280efc0ec449f674e6c5bf2cb02">Y</a> = 0;</div>
<div class="line"><span class="lineno">  243</span>    p-&gt;<a class="code hl_variable" href="structPiece.html#a700d5a2720932a70447d8c675fb6e2b4">Rotation</a> = 0;</div>
<div class="line"><span class="lineno">  244</span>    p-&gt;<a class="code hl_variable" href="structPiece.html#a57548407d4c534712ac9ea47c86fa4d8">Type</a> = next;</div>
<div class="line"><span class="lineno">  245</span>    next = bag[idx++];</div>
<div class="line"><span class="lineno">  246</span>    <span class="keywordflow">return</span> next;</div>
<div class="line"><span class="lineno">  247</span>}</div>
<div class="ttc" id="arand_8c_html_a9eeb6c44d48cd8ace4b454da982406c9"><div class="ttname"><a href="rand_8c.html#a9eeb6c44d48cd8ace4b454da982406c9">rand</a></div><div class="ttdeci">i32 rand(void)</div><div class="ttdoc">Returns a pseudo-random integer. Generator is seeded with a hardware noise source.</div><div class="ttdef"><b>Definition:</b> <a href="rand_8c_source.html#l00011">rand.c:11</a></div></div>
<div class="ttc" id="astructPiece_html_a3cddb7dc76f326558891036d46d5351b"><div class="ttname"><a href="structPiece.html#a3cddb7dc76f326558891036d46d5351b">Piece::X</a></div><div class="ttdeci">i32 X</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00042">main.c:42</a></div></div>
<div class="ttc" id="astructPiece_html_a57548407d4c534712ac9ea47c86fa4d8"><div class="ttname"><a href="structPiece.html#a57548407d4c534712ac9ea47c86fa4d8">Piece::Type</a></div><div class="ttdeci">PieceType Type</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00051">main.c:51</a></div></div>
<div class="ttc" id="astructPiece_html_a700d5a2720932a70447d8c675fb6e2b4"><div class="ttname"><a href="structPiece.html#a700d5a2720932a70447d8c675fb6e2b4">Piece::Rotation</a></div><div class="ttdeci">i32 Rotation</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00048">main.c:48</a></div></div>
<div class="ttc" id="astructPiece_html_aab10b280efc0ec449f674e6c5bf2cb02"><div class="ttname"><a href="structPiece.html#aab10b280efc0ec449f674e6c5bf2cb02">Piece::Y</a></div><div class="ttdeci">i32 Y</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00045">main.c:45</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="rand_8c_source.html#l00011">rand()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00048">Piece::Rotation</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00051">Piece::Type</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00042">Piece::X</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00045">Piece::Y</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2tetris_2main_8c_source.html#l00433">loop()</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00417">setup()</a>.</p>

</div>
</div>
<a id="a179f7e3f493ed0a3bdf1bc11907e8c98" name="a179f7e3f493ed0a3bdf1bc11907e8c98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a179f7e3f493ed0a3bdf1bc11907e8c98">&#9670;&#160;</a></span>_to_field()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void _to_field </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="apps_2tetris_2main_8c.html#a48e0eca677ce0a3de1dc2f2ea612cb19">FieldType</a> *&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structPiece.html">Piece</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Place a piece into a field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field</td><td>Pointer to the field on which to put the piece </td></tr>
    <tr><td class="paramname">p</td><td>Pointer to the piece that should be placed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00289">289</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  290</span>{</div>
<div class="line"><span class="lineno">  291</span>    <a class="code hl_typedef" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a> x, y, bit, row, col;</div>
<div class="line"><span class="lineno">  292</span>    <a class="code hl_typedef" href="types_8h.html#ace9d960e74685e2cd84b36132dbbf8aa">u16</a> blocks;</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>    row = col = 0;</div>
<div class="line"><span class="lineno">  295</span>    blocks = <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a975dd0ea903eaee5b01dc8fa1f03cc21">Pieces</a>[p-&gt;<a class="code hl_variable" href="structPiece.html#a57548407d4c534712ac9ea47c86fa4d8">Type</a>].<a class="code hl_variable" href="structPieceData.html#aeaf08a5f3650a9bcbf81f4c6bc2c7d7a">Blocks</a>[p-&gt;<a class="code hl_variable" href="structPiece.html#a700d5a2720932a70447d8c675fb6e2b4">Rotation</a>];</div>
<div class="line"><span class="lineno">  296</span>    <span class="keywordflow">for</span>(bit = 0x8000; bit &gt; 0; bit &gt;&gt;= 1)</div>
<div class="line"><span class="lineno">  297</span>    {</div>
<div class="line"><span class="lineno">  298</span>        <span class="keywordflow">if</span>(blocks &amp; bit)</div>
<div class="line"><span class="lineno">  299</span>        {</div>
<div class="line"><span class="lineno">  300</span>            x = p-&gt;<a class="code hl_variable" href="structPiece.html#a3cddb7dc76f326558891036d46d5351b">X</a> + col;</div>
<div class="line"><span class="lineno">  301</span>            y = p-&gt;<a class="code hl_variable" href="structPiece.html#aab10b280efc0ec449f674e6c5bf2cb02">Y</a> + row;</div>
<div class="line"><span class="lineno">  302</span> </div>
<div class="line"><span class="lineno">  303</span>            field[y * <a class="code hl_define" href="apps_2tetris_2main_8c.html#a313353b53d609b3b2b37e1aecf98bf4c">FIELD_WIDTH</a> + x] = p-&gt;<a class="code hl_variable" href="structPiece.html#a57548407d4c534712ac9ea47c86fa4d8">Type</a> + 1;</div>
<div class="line"><span class="lineno">  304</span>        }</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>        <span class="keywordflow">if</span>(++col == 4)</div>
<div class="line"><span class="lineno">  307</span>        {</div>
<div class="line"><span class="lineno">  308</span>            col = 0;</div>
<div class="line"><span class="lineno">  309</span>            ++row;</div>
<div class="line"><span class="lineno">  310</span>        }</div>
<div class="line"><span class="lineno">  311</span>    }</div>
<div class="line"><span class="lineno">  312</span>}</div>
<div class="ttc" id="astructPieceData_html_aeaf08a5f3650a9bcbf81f4c6bc2c7d7a"><div class="ttname"><a href="structPieceData.html#aeaf08a5f3650a9bcbf81f4c6bc2c7d7a">PieceData::Blocks</a></div><div class="ttdeci">u16 Blocks[4]</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00058">main.c:58</a></div></div>
<div class="ttc" id="atypes_8h_html_ace9d960e74685e2cd84b36132dbbf8aa"><div class="ttname"><a href="types_8h.html#ace9d960e74685e2cd84b36132dbbf8aa">u16</a></div><div class="ttdeci">uint16_t u16</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00035">types.h:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="apps_2tetris_2main_8c_source.html#l00058">PieceData::Blocks</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00012">FIELD_WIDTH</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00065">Pieces</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00048">Piece::Rotation</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00051">Piece::Type</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00042">Piece::X</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00045">Piece::Y</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2tetris_2main_8c_source.html#l00317">_draw_field()</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00433">loop()</a>.</p>

</div>
</div>
<a id="afa6a85d7ceaf4d7c8e3b17881258b6e3" name="afa6a85d7ceaf4d7c8e3b17881258b6e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa6a85d7ceaf4d7c8e3b17881258b6e3">&#9670;&#160;</a></span>_valid_position()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool _valid_position </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="apps_2tetris_2main_8c.html#a48e0eca677ce0a3de1dc2f2ea612cb19">FieldType</a> *&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structPiece.html">Piece</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the position of a piece is valid, meaning that it is not outside of the frame and not colliding with pieces on the field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field</td><td>Pointer to field aray </td></tr>
    <tr><td class="paramname">p</td><td>Pointer to piece </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if position is valid, false otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00257">257</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  258</span>{</div>
<div class="line"><span class="lineno">  259</span>    <a class="code hl_typedef" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a> bit, row, col;</div>
<div class="line"><span class="lineno">  260</span>    <a class="code hl_typedef" href="types_8h.html#ace9d960e74685e2cd84b36132dbbf8aa">u16</a> blocks;</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>    row = 0;</div>
<div class="line"><span class="lineno">  263</span>    col = 0;</div>
<div class="line"><span class="lineno">  264</span>    blocks = <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a975dd0ea903eaee5b01dc8fa1f03cc21">Pieces</a>[p-&gt;<a class="code hl_variable" href="structPiece.html#a57548407d4c534712ac9ea47c86fa4d8">Type</a>].<a class="code hl_variable" href="structPieceData.html#aeaf08a5f3650a9bcbf81f4c6bc2c7d7a">Blocks</a>[p-&gt;<a class="code hl_variable" href="structPiece.html#a700d5a2720932a70447d8c675fb6e2b4">Rotation</a>];</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>    <span class="keywordflow">for</span>(bit = 0x8000; bit &gt; 0; bit &gt;&gt;= 1)</div>
<div class="line"><span class="lineno">  267</span>    {</div>
<div class="line"><span class="lineno">  268</span>        <span class="keywordflow">if</span>((blocks &amp; bit) &amp;&amp; <a class="code hl_function" href="apps_2tetris_2main_8c.html#a7c2806ca944c2472b5e1d9234fc6fce7">_field_get</a>(field, p-&gt;<a class="code hl_variable" href="structPiece.html#a3cddb7dc76f326558891036d46d5351b">X</a> + col, p-&gt;<a class="code hl_variable" href="structPiece.html#aab10b280efc0ec449f674e6c5bf2cb02">Y</a> + row))</div>
<div class="line"><span class="lineno">  269</span>        {</div>
<div class="line"><span class="lineno">  270</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  271</span>        }</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>        <span class="keywordflow">if</span>(++col == 4)</div>
<div class="line"><span class="lineno">  274</span>        {</div>
<div class="line"><span class="lineno">  275</span>            col = 0;</div>
<div class="line"><span class="lineno">  276</span>            ++row;</div>
<div class="line"><span class="lineno">  277</span>        }</div>
<div class="line"><span class="lineno">  278</span>    }</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  281</span>}</div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a7c2806ca944c2472b5e1d9234fc6fce7"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a7c2806ca944c2472b5e1d9234fc6fce7">_field_get</a></div><div class="ttdeci">static i32 _field_get(FieldType *field, i32 x, i32 y)</div><div class="ttdoc">Get the piece at a position inside a field.</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00137">main.c:137</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="apps_2tetris_2main_8c_source.html#l00137">_field_get()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00058">PieceData::Blocks</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00065">Pieces</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00048">Piece::Rotation</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00051">Piece::Type</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00042">Piece::X</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00045">Piece::Y</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2tetris_2main_8c_source.html#l00355">event_key()</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00433">loop()</a>.</p>

</div>
</div>
<a id="af5305db9ea018cc40d167b2a51d77ac1" name="af5305db9ea018cc40d167b2a51d77ac1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5305db9ea018cc40d167b2a51d77ac1">&#9670;&#160;</a></span>event_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void event_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="keyboard-shared_8h.html#a48752551c4279f8cddf3585f8272092a">Key</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a>&#160;</td>
          <td class="paramname"><em>chr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="keyboard-shared_8h.html#a7e51438e5f6bf556512ce7103cddac09">KeyState</a>&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main key event handler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The key that was pressed </td></tr>
    <tr><td class="paramname">chr</td><td>The character corresponding to the key </td></tr>
    <tr><td class="paramname">state</td><td>Key state (pressed, repeat, released) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00355">355</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  356</span>{</div>
<div class="line"><span class="lineno">  357</span>    <span class="keywordflow">if</span>(state == KEYSTATE_RELEASED)</div>
<div class="line"><span class="lineno">  358</span>    {</div>
<div class="line"><span class="lineno">  359</span>        <span class="keywordflow">switch</span>(key)</div>
<div class="line"><span class="lineno">  360</span>        {</div>
<div class="line"><span class="lineno">  361</span>        <span class="keywordflow">case</span> KEY_DOWN:</div>
<div class="line"><span class="lineno">  362</span>            <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a3b61dc076d66b07a466af8d80eb02283">_ticks_update</a> = <a class="code hl_define" href="apps_2tetris_2main_8c.html#a8dd63073e02e2b072414b6bf3cdf57d6">FALL_SPEED_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  363</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  364</span>        }</div>
<div class="line"><span class="lineno">  365</span>    }</div>
<div class="line"><span class="lineno">  366</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  367</span>    {</div>
<div class="line"><span class="lineno">  368</span>        <span class="keywordflow">switch</span>(key)</div>
<div class="line"><span class="lineno">  369</span>        {</div>
<div class="line"><span class="lineno">  370</span>        <span class="keywordflow">case</span> KEY_DOWN:</div>
<div class="line"><span class="lineno">  371</span>            <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a3b61dc076d66b07a466af8d80eb02283">_ticks_update</a> = <a class="code hl_define" href="apps_2tetris_2main_8c.html#aa4b7f297dae8ab980841cd5ecdb93ee8">FALL_SPEED_FAST</a>;</div>
<div class="line"><span class="lineno">  372</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  373</span> </div>
<div class="line"><span class="lineno">  374</span>        <span class="keywordflow">case</span> KEY_UP:</div>
<div class="line"><span class="lineno">  375</span>            <span class="keywordflow">if</span>(--<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>.<a class="code hl_variable" href="structPiece.html#a700d5a2720932a70447d8c675fb6e2b4">Rotation</a> == -1)</div>
<div class="line"><span class="lineno">  376</span>            {</div>
<div class="line"><span class="lineno">  377</span>                <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>.<a class="code hl_variable" href="structPiece.html#a700d5a2720932a70447d8c675fb6e2b4">Rotation</a> = 3;</div>
<div class="line"><span class="lineno">  378</span>            }</div>
<div class="line"><span class="lineno">  379</span> </div>
<div class="line"><span class="lineno">  380</span>            <span class="keywordflow">if</span>(<a class="code hl_function" href="apps_2tetris_2main_8c.html#afa6a85d7ceaf4d7c8e3b17881258b6e3">_valid_position</a>(<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a712087fe8401cc72eeea97bf20629aef">_field</a>, &amp;<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>))</div>
<div class="line"><span class="lineno">  381</span>            {</div>
<div class="line"><span class="lineno">  382</span>                <span class="keywordflow">if</span>(++<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>.<a class="code hl_variable" href="structPiece.html#a700d5a2720932a70447d8c675fb6e2b4">Rotation</a> == 4)</div>
<div class="line"><span class="lineno">  383</span>                {</div>
<div class="line"><span class="lineno">  384</span>                    <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>.<a class="code hl_variable" href="structPiece.html#a700d5a2720932a70447d8c675fb6e2b4">Rotation</a> = 0;</div>
<div class="line"><span class="lineno">  385</span>                }</div>
<div class="line"><span class="lineno">  386</span>            }</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>            <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a3bd315b7f7932213204e50b823729896">_changed</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  389</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  390</span> </div>
<div class="line"><span class="lineno">  391</span>        <span class="keywordflow">case</span> KEY_LEFT:</div>
<div class="line"><span class="lineno">  392</span>            --<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>.<a class="code hl_variable" href="structPiece.html#a3cddb7dc76f326558891036d46d5351b">X</a>;</div>
<div class="line"><span class="lineno">  393</span>            <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a3bd315b7f7932213204e50b823729896">_changed</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  394</span>            <span class="keywordflow">if</span>(<a class="code hl_function" href="apps_2tetris_2main_8c.html#afa6a85d7ceaf4d7c8e3b17881258b6e3">_valid_position</a>(<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a712087fe8401cc72eeea97bf20629aef">_field</a>, &amp;<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>))</div>
<div class="line"><span class="lineno">  395</span>            {</div>
<div class="line"><span class="lineno">  396</span>                ++<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>.<a class="code hl_variable" href="structPiece.html#a3cddb7dc76f326558891036d46d5351b">X</a>;</div>
<div class="line"><span class="lineno">  397</span>            }</div>
<div class="line"><span class="lineno">  398</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>        <span class="keywordflow">case</span> KEY_RIGHT:</div>
<div class="line"><span class="lineno">  401</span>            ++<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>.<a class="code hl_variable" href="structPiece.html#a3cddb7dc76f326558891036d46d5351b">X</a>;</div>
<div class="line"><span class="lineno">  402</span>            <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a3bd315b7f7932213204e50b823729896">_changed</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  403</span>            <span class="keywordflow">if</span>(<a class="code hl_function" href="apps_2tetris_2main_8c.html#afa6a85d7ceaf4d7c8e3b17881258b6e3">_valid_position</a>(<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a712087fe8401cc72eeea97bf20629aef">_field</a>, &amp;<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>))</div>
<div class="line"><span class="lineno">  404</span>            {</div>
<div class="line"><span class="lineno">  405</span>                --<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>.<a class="code hl_variable" href="structPiece.html#a3cddb7dc76f326558891036d46d5351b">X</a>;</div>
<div class="line"><span class="lineno">  406</span>            }</div>
<div class="line"><span class="lineno">  407</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  408</span>        }</div>
<div class="line"><span class="lineno">  409</span>    }</div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>    (void)chr;</div>
<div class="line"><span class="lineno">  412</span>}</div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a3b61dc076d66b07a466af8d80eb02283"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a3b61dc076d66b07a466af8d80eb02283">_ticks_update</a></div><div class="ttdeci">static i32 _ticks_update</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00119">main.c:119</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a3bd315b7f7932213204e50b823729896"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a3bd315b7f7932213204e50b823729896">_changed</a></div><div class="ttdeci">static bool _changed</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00122">main.c:122</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a8dd63073e02e2b072414b6bf3cdf57d6"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a8dd63073e02e2b072414b6bf3cdf57d6">FALL_SPEED_DEFAULT</a></div><div class="ttdeci">#define FALL_SPEED_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00024">main.c:24</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_aa4b7f297dae8ab980841cd5ecdb93ee8"><div class="ttname"><a href="apps_2tetris_2main_8c.html#aa4b7f297dae8ab980841cd5ecdb93ee8">FALL_SPEED_FAST</a></div><div class="ttdeci">#define FALL_SPEED_FAST</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00027">main.c:27</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_afa6a85d7ceaf4d7c8e3b17881258b6e3"><div class="ttname"><a href="apps_2tetris_2main_8c.html#afa6a85d7ceaf4d7c8e3b17881258b6e3">_valid_position</a></div><div class="ttdeci">static bool _valid_position(FieldType *field, Piece *p)</div><div class="ttdoc">Check if the position of a piece is valid, meaning that it is not outside of the frame and not collid...</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00257">main.c:257</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="apps_2tetris_2main_8c_source.html#l00122">_changed</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00110">_cp</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00125">_field</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00119">_ticks_update</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00257">_valid_position()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00024">FALL_SPEED_DEFAULT</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00027">FALL_SPEED_FAST</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00048">Piece::Rotation</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00042">Piece::X</a>.</p>

</div>
</div>
<a id="a0b33edabd7f1c4e4a0bf32c67269be2f" name="a0b33edabd7f1c4e4a0bf32c67269be2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b33edabd7f1c4e4a0bf32c67269be2f">&#9670;&#160;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main game loop, update state. </p>
<p>Loop function that is called repeatedly Must be implemented by user. </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00433">433</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  434</span>{</div>
<div class="line"><span class="lineno">  435</span>    <span class="keyword">static</span> <a class="code hl_typedef" href="types_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> last_ticks, score;</div>
<div class="line"><span class="lineno">  436</span>    <a class="code hl_typedef" href="types_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> ticks;</div>
<div class="line"><span class="lineno">  437</span> </div>
<div class="line"><span class="lineno">  438</span>    <span class="keywordflow">if</span>((ticks = <a class="code hl_function" href="timer_8c.html#aee701eeb891b748ed2e12da119816882">millis</a>()) &gt; last_ticks + <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a3b61dc076d66b07a466af8d80eb02283">_ticks_update</a>)</div>
<div class="line"><span class="lineno">  439</span>    {</div>
<div class="line"><span class="lineno">  440</span>        last_ticks = ticks;</div>
<div class="line"><span class="lineno">  441</span>        ++<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>.<a class="code hl_variable" href="structPiece.html#aab10b280efc0ec449f674e6c5bf2cb02">Y</a>;</div>
<div class="line"><span class="lineno">  442</span>        <span class="keywordflow">if</span>(<a class="code hl_function" href="apps_2tetris_2main_8c.html#afa6a85d7ceaf4d7c8e3b17881258b6e3">_valid_position</a>(<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a712087fe8401cc72eeea97bf20629aef">_field</a>, &amp;<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>))</div>
<div class="line"><span class="lineno">  443</span>        {</div>
<div class="line"><span class="lineno">  444</span>            --<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>.<a class="code hl_variable" href="structPiece.html#aab10b280efc0ec449f674e6c5bf2cb02">Y</a>;</div>
<div class="line"><span class="lineno">  445</span>            <a class="code hl_function" href="apps_2tetris_2main_8c.html#a179f7e3f493ed0a3bdf1bc11907e8c98">_to_field</a>(<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a712087fe8401cc72eeea97bf20629aef">_field</a>, &amp;<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>);</div>
<div class="line"><span class="lineno">  446</span>            score += <a class="code hl_function" href="apps_2tetris_2main_8c.html#adf863a16219a55882b73716b8ee2b8b8">_field_rows</a>(<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a712087fe8401cc72eeea97bf20629aef">_field</a>);</div>
<div class="line"><span class="lineno">  447</span>            <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a66a310b0917a56120d5eec8c86066461">_np</a>.<a class="code hl_variable" href="structPiece.html#a57548407d4c534712ac9ea47c86fa4d8">Type</a> = <a class="code hl_function" href="apps_2tetris_2main_8c.html#a8fe5892e2d197c0c60dfaaa2559f64ae">_new_piece</a>(&amp;<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>);</div>
<div class="line"><span class="lineno">  448</span>            <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a3b61dc076d66b07a466af8d80eb02283">_ticks_update</a> = <a class="code hl_define" href="apps_2tetris_2main_8c.html#a8dd63073e02e2b072414b6bf3cdf57d6">FALL_SPEED_DEFAULT</a>;</div>
<div class="line"><span class="lineno">  449</span>            <span class="keywordflow">if</span>(<a class="code hl_function" href="apps_2tetris_2main_8c.html#afa6a85d7ceaf4d7c8e3b17881258b6e3">_valid_position</a>(<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a712087fe8401cc72eeea97bf20629aef">_field</a>, &amp;<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>))</div>
<div class="line"><span class="lineno">  450</span>            {</div>
<div class="line"><span class="lineno">  451</span>                <a class="code hl_function" href="string_8c.html#ab5fb910d7238069eb23f4b06809aa68e">memset</a>(<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a712087fe8401cc72eeea97bf20629aef">_field</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a712087fe8401cc72eeea97bf20629aef">_field</a>));</div>
<div class="line"><span class="lineno">  452</span>            }</div>
<div class="line"><span class="lineno">  453</span>        }</div>
<div class="line"><span class="lineno">  454</span> </div>
<div class="line"><span class="lineno">  455</span>        <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a3bd315b7f7932213204e50b823729896">_changed</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  456</span>    }</div>
<div class="line"><span class="lineno">  457</span> </div>
<div class="line"><span class="lineno">  458</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a3bd315b7f7932213204e50b823729896">_changed</a>)</div>
<div class="line"><span class="lineno">  459</span>    {</div>
<div class="line"><span class="lineno">  460</span>        <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a3bd315b7f7932213204e50b823729896">_changed</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  461</span>        <a class="code hl_function" href="apps_2tetris_2main_8c.html#ade05f2059114427e9bcbc708760f5da3">_draw_field</a>();</div>
<div class="line"><span class="lineno">  462</span>    }</div>
<div class="line"><span class="lineno">  463</span>}</div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a66a310b0917a56120d5eec8c86066461"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a66a310b0917a56120d5eec8c86066461">_np</a></div><div class="ttdeci">static Piece _np</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00113">main.c:113</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a8fe5892e2d197c0c60dfaaa2559f64ae"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a8fe5892e2d197c0c60dfaaa2559f64ae">_new_piece</a></div><div class="ttdeci">static PieceType _new_piece(Piece *p)</div><div class="ttdoc">Get the next random tetris piece.</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00216">main.c:216</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_ade05f2059114427e9bcbc708760f5da3"><div class="ttname"><a href="apps_2tetris_2main_8c.html#ade05f2059114427e9bcbc708760f5da3">_draw_field</a></div><div class="ttdeci">static void _draw_field(void)</div><div class="ttdoc">Draw the tetris field to the screen.</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00317">main.c:317</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_adf863a16219a55882b73716b8ee2b8b8"><div class="ttname"><a href="apps_2tetris_2main_8c.html#adf863a16219a55882b73716b8ee2b8b8">_field_rows</a></div><div class="ttdeci">static i32 _field_rows(FieldType *field)</div><div class="ttdoc">Remove full rows and update score.</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00168">main.c:168</a></div></div>
<div class="ttc" id="astring_8c_html_ab5fb910d7238069eb23f4b06809aa68e"><div class="ttname"><a href="string_8c.html#ab5fb910d7238069eb23f4b06809aa68e">memset</a></div><div class="ttdeci">void * memset(void *ptr, i32 value, u32 count)</div><div class="ttdoc">Sets all bytes in a block of memory to value</div><div class="ttdef"><b>Definition:</b> <a href="string_8c_source.html#l00176">string.c:176</a></div></div>
<div class="ttc" id="atimer_8c_html_aee701eeb891b748ed2e12da119816882"><div class="ttname"><a href="timer_8c.html#aee701eeb891b748ed2e12da119816882">millis</a></div><div class="ttdeci">u32 millis(void)</div><div class="ttdoc">Get milliseconds since startup.</div><div class="ttdef"><b>Definition:</b> <a href="timer_8c_source.html#l00036">timer.c:36</a></div></div>
<div class="ttc" id="atypes_8h_html_afaa62991928fb9fb18ff0db62a040aba"><div class="ttname"><a href="types_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a></div><div class="ttdeci">uint32_t u32</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00032">types.h:32</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="apps_2tetris_2main_8c_source.html#l00122">_changed</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00110">_cp</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00317">_draw_field()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00125">_field</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00168">_field_rows()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00216">_new_piece()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00113">_np</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00119">_ticks_update</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00289">_to_field()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00257">_valid_position()</a>, <a class="el" href="syscall_8h_source.html#l00206">exit()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00024">FALL_SPEED_DEFAULT</a>, <a class="el" href="string_8c_source.html#l00176">memset()</a>, <a class="el" href="timer_8c_source.html#l00036">millis()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00051">Piece::Type</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00045">Piece::Y</a>.</p>

</div>
</div>
<a id="a7dfd9b79bc5a37d7df40207afbc5431f" name="a7dfd9b79bc5a37d7df40207afbc5431f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dfd9b79bc5a37d7df40207afbc5431f">&#9670;&#160;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main setup function, initialize game. </p>
<p>Setup function that is called at program start. Must be implemented by user. </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00417">417</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  418</span>{</div>
<div class="line"><span class="lineno">  419</span>    <a class="code hl_function" href="keyboard_8c.html#a3676e1550d4471bddab4c84dd0c844dc">keyboard_register_event</a>(<a class="code hl_function" href="apps_2editor_2main_8c.html#af5305db9ea018cc40d167b2a51d77ac1">event_key</a>);</div>
<div class="line"><span class="lineno">  420</span>    <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a66a310b0917a56120d5eec8c86066461">_np</a>.<a class="code hl_variable" href="structPiece.html#a3cddb7dc76f326558891036d46d5351b">X</a> = 11;</div>
<div class="line"><span class="lineno">  421</span>    <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a66a310b0917a56120d5eec8c86066461">_np</a>.<a class="code hl_variable" href="structPiece.html#aab10b280efc0ec449f674e6c5bf2cb02">Y</a> = 0;</div>
<div class="line"><span class="lineno">  422</span>    <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a66a310b0917a56120d5eec8c86066461">_np</a>.<a class="code hl_variable" href="structPiece.html#a700d5a2720932a70447d8c675fb6e2b4">Rotation</a> = 1;</div>
<div class="line"><span class="lineno">  423</span>    <a class="code hl_function" href="string_8c.html#ab5fb910d7238069eb23f4b06809aa68e">memset</a>(<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a712087fe8401cc72eeea97bf20629aef">_field</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a712087fe8401cc72eeea97bf20629aef">_field</a>));</div>
<div class="line"><span class="lineno">  424</span>    <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a66a310b0917a56120d5eec8c86066461">_np</a>.<a class="code hl_variable" href="structPiece.html#a57548407d4c534712ac9ea47c86fa4d8">Type</a> = <a class="code hl_function" href="apps_2tetris_2main_8c.html#a8fe5892e2d197c0c60dfaaa2559f64ae">_new_piece</a>(&amp;<a class="code hl_variable" href="apps_2tetris_2main_8c.html#a484db87782841a7763d17ef82d344de1">_cp</a>);</div>
<div class="line"><span class="lineno">  425</span>    <a class="code hl_variable" href="apps_2tetris_2main_8c.html#a6cdf6e6db875a442f3ab6db542bd2bb5">_status</a> = <a class="code hl_define" href="apps_2tetris_2main_8c.html#a799b04d03f49612e3e636b56c3972b80">STATUS_RUNNING</a>;</div>
<div class="line"><span class="lineno">  426</span>    <a class="code hl_function" href="apps_2tetris_2main_8c.html#a63512b1efd6d377245329f587094f300">_draw_grid</a>();</div>
<div class="line"><span class="lineno">  427</span>    <a class="code hl_function" href="font_8h.html#a1dc9a04991c7d42402c21ab6a4b933e2">font_string</a>(210, 10, <span class="stringliteral">&quot;Next piece:&quot;</span>, font_default, <a class="code hl_define" href="lcd_8h.html#a9b44987ffdc2af19b635206b94334b69">COLOR_WHITE</a>, <a class="code hl_define" href="lcd_8h.html#aba2a7fe77a7501e5844370eec0185207">COLOR_BLACK</a>);</div>
<div class="line"><span class="lineno">  428</span>}</div>
<div class="ttc" id="aapps_2editor_2main_8c_html_af5305db9ea018cc40d167b2a51d77ac1"><div class="ttname"><a href="apps_2editor_2main_8c.html#af5305db9ea018cc40d167b2a51d77ac1">event_key</a></div><div class="ttdeci">void event_key(Key key, i32 chr, KeyState state)</div><div class="ttdoc">Main key event handler.</div><div class="ttdef"><b>Definition:</b> <a href="apps_2editor_2main_8c_source.html#l00068">main.c:68</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a63512b1efd6d377245329f587094f300"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a63512b1efd6d377245329f587094f300">_draw_grid</a></div><div class="ttdeci">static void _draw_grid(void)</div><div class="ttdoc">Draw field grid.</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00196">main.c:196</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a6cdf6e6db875a442f3ab6db542bd2bb5"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a6cdf6e6db875a442f3ab6db542bd2bb5">_status</a></div><div class="ttdeci">static Status _status</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00116">main.c:116</a></div></div>
<div class="ttc" id="aapps_2tetris_2main_8c_html_a799b04d03f49612e3e636b56c3972b80"><div class="ttname"><a href="apps_2tetris_2main_8c.html#a799b04d03f49612e3e636b56c3972b80">STATUS_RUNNING</a></div><div class="ttdeci">#define STATUS_RUNNING</div><div class="ttdef"><b>Definition:</b> <a href="apps_2tetris_2main_8c_source.html#l00033">main.c:33</a></div></div>
<div class="ttc" id="afont_8h_html_a1dc9a04991c7d42402c21ab6a4b933e2"><div class="ttname"><a href="font_8h.html#a1dc9a04991c7d42402c21ab6a4b933e2">font_string</a></div><div class="ttdeci">static i32 font_string(i32 x, i32 y, const char *s, Font *font, Color fg, Color bg)</div><div class="ttdoc">Draw an NUL-terminated UTF-8 string s</div><div class="ttdef"><b>Definition:</b> <a href="font_8h_source.html#l00090">font.h:90</a></div></div>
<div class="ttc" id="akeyboard_8c_html_a3676e1550d4471bddab4c84dd0c844dc"><div class="ttname"><a href="keyboard_8c.html#a3676e1550d4471bddab4c84dd0c844dc">keyboard_register_event</a></div><div class="ttdeci">void keyboard_register_event(KeyEvent event)</div><div class="ttdoc">Register an OnKeyboardInput event.</div><div class="ttdef"><b>Definition:</b> <a href="keyboard_8c_source.html#l00031">keyboard.c:31</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="apps_2tetris_2main_8c_source.html#l00110">_cp</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00196">_draw_grid()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00125">_field</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00216">_new_piece()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00113">_np</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00116">_status</a>, <a class="el" href="lcd_8h_source.html#l00038">COLOR_BLACK</a>, <a class="el" href="lcd_8h_source.html#l00035">COLOR_WHITE</a>, <a class="el" href="apps_2editor_2main_8c_source.html#l00068">event_key()</a>, <a class="el" href="font_8h_source.html#l00090">font_string()</a>, <a class="el" href="gfx-types_8h_source.html#l00019">GFX_HEIGHT</a>, <a class="el" href="gfx_8c_source.html#l00030">gfx_image_rgb()</a>, <a class="el" href="gfx_8c_source.html#l00011">gfx_rect()</a>, <a class="el" href="gfx-types_8h_source.html#l00016">GFX_WIDTH</a>, <a class="el" href="keyboard_8c_source.html#l00031">keyboard_register_event()</a>, <a class="el" href="string_8c_source.html#l00176">memset()</a>, <a class="el" href="timer_8c_source.html#l00036">millis()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00048">Piece::Rotation</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00033">STATUS_RUNNING</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00051">Piece::Type</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00042">Piece::X</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00045">Piece::Y</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a3bd315b7f7932213204e50b823729896" name="a3bd315b7f7932213204e50b823729896"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bd315b7f7932213204e50b823729896">&#9670;&#160;</a></span>_changed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool _changed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Indicates that the field has changed and should be redrawn </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00122">122</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2tetris_2main_8c_source.html#l00355">event_key()</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00433">loop()</a>.</p>

</div>
</div>
<a id="a484db87782841a7763d17ef82d344de1" name="a484db87782841a7763d17ef82d344de1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a484db87782841a7763d17ef82d344de1">&#9670;&#160;</a></span>_cp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structPiece.html">Piece</a> _cp</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Current <a class="el" href="structPiece.html">Piece</a> </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00110">110</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2tetris_2main_8c_source.html#l00317">_draw_field()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00355">event_key()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00433">loop()</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00417">setup()</a>.</p>

</div>
</div>
<a id="a712087fe8401cc72eeea97bf20629aef" name="a712087fe8401cc72eeea97bf20629aef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a712087fe8401cc72eeea97bf20629aef">&#9670;&#160;</a></span>_field</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="apps_2tetris_2main_8c.html#a48e0eca677ce0a3de1dc2f2ea612cb19">FieldType</a> _field[<a class="el" href="apps_2tetris_2main_8c.html#a49d2668adfdf4f710a6c58fdbc0bcbe6">FIELD_SIZE</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Array that stores landed, non-moving pieces </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00125">125</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2tetris_2main_8c_source.html#l00317">_draw_field()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00355">event_key()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00433">loop()</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00417">setup()</a>.</p>

</div>
</div>
<a id="a66a310b0917a56120d5eec8c86066461" name="a66a310b0917a56120d5eec8c86066461"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66a310b0917a56120d5eec8c86066461">&#9670;&#160;</a></span>_np</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structPiece.html">Piece</a> _np</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Next <a class="el" href="structPiece.html">Piece</a> </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00113">113</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2tetris_2main_8c_source.html#l00433">loop()</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00417">setup()</a>.</p>

</div>
</div>
<a id="a6cdf6e6db875a442f3ab6db542bd2bb5" name="a6cdf6e6db875a442f3ab6db542bd2bb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cdf6e6db875a442f3ab6db542bd2bb5">&#9670;&#160;</a></span>_status</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="status_8h.html#a67a0db04d321a74b7e7fcfd3f1a3f70b">Status</a> _status</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Current game status (see enum above) </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00116">116</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2tetris_2main_8c_source.html#l00417">setup()</a>.</p>

</div>
</div>
<a id="a3b61dc076d66b07a466af8d80eb02283" name="a3b61dc076d66b07a466af8d80eb02283"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b61dc076d66b07a466af8d80eb02283">&#9670;&#160;</a></span>_ticks_update</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a48d6cd8e4135fb2ff7e7f2dac84089ec">i32</a> _ticks_update = <a class="el" href="apps_2tetris_2main_8c.html#a8dd63073e02e2b072414b6bf3cdf57d6">FALL_SPEED_DEFAULT</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Milliseconds duration for a tile to move down by one tile </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00119">119</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2tetris_2main_8c_source.html#l00355">event_key()</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00433">loop()</a>.</p>

</div>
</div>
<a id="a975dd0ea903eaee5b01dc8fa1f03cc21" name="a975dd0ea903eaee5b01dc8fa1f03cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a975dd0ea903eaee5b01dc8fa1f03cc21">&#9670;&#160;</a></span>Pieces</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structPieceData.html">PieceData</a> Pieces[]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>All 7 tetrominos </p>

<p class="definition">Definition at line <a class="el" href="apps_2tetris_2main_8c_source.html#l00065">65</a> of file <a class="el" href="apps_2tetris_2main_8c_source.html">main.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="apps_2tetris_2main_8c_source.html#l00317">_draw_field()</a>, <a class="el" href="apps_2tetris_2main_8c_source.html#l00289">_to_field()</a>, and <a class="el" href="apps_2tetris_2main_8c_source.html#l00257">_valid_position()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
