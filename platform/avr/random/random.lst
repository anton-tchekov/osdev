   1               		.file	"random.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               		.file 0 "/home/files/osdev/platform/avr" "random/random.c"
  11               	.global	random_init
  13               	random_init:
  14               	.LFB7:
  15               		.file 1 "random/random.c"
   1:random/random.c **** /**
   2:random/random.c ****  * @file    random.c
   3:random/random.c ****  * @author  Tim Gabrikowski, Anton Tchekov
   4:random/random.c ****  * @version 0.1
   5:random/random.c ****  * @date    16.05.2023
   6:random/random.c ****  */
   7:random/random.c **** 
   8:random/random.c **** #include <random.h>
   9:random/random.c **** #include <adc.h>
  10:random/random.c **** #include <logger.h>
  11:random/random.c **** #include <stdlib.h>
  12:random/random.c **** #include <avr/pgmspace.h>
  13:random/random.c **** 
  14:random/random.c **** /* TODO: Replace srand and rand with own random generator */
  15:random/random.c **** 
  16:random/random.c **** void random_init(void)
  17:random/random.c **** {
  16               		.loc 1 17 1 view -0
  17               		.cfi_startproc
  18               	/* prologue: function */
  19               	/* frame size = 0 */
  20               	/* stack size = 0 */
  21               	.L__stack_usage = 0
  18:random/random.c **** 	srand(adc_read(ADC_CHANNEL_NOISE));
  22               		.loc 1 18 2 view .LVU1
  23 0000 85E0      		ldi r24,lo8(5)
  24 0002 0E94 0000 		call adc_read
  25               	.LVL0:
  26 0006 0E94 0000 		call srand
  27               	.LVL1:
  19:random/random.c **** 	log_boot_P(LOG_INIT, PSTR("RNG initialized"));
  28               		.loc 1 19 2 view .LVU2
  29               	.LBB2:
  30               		.loc 1 19 23 view .LVU3
  31               		.loc 1 19 23 view .LVU4
  32               	.LBE2:
  33               		.loc 1 19 2 is_stmt 0 view .LVU5
  34 000a 80E0      		ldi r24,lo8(__c.0)
  35 000c 90E0      		ldi r25,hi8(__c.0)
  36 000e 9F93      		push r25
  37               		.cfi_def_cfa_offset 3
  38 0010 8F93      		push r24
  39               		.cfi_def_cfa_offset 4
  40 0012 1F92      		push __zero_reg__
  41               		.cfi_def_cfa_offset 5
  42 0014 0E94 0000 		call log_boot_P
  43               	.LVL2:
  20:random/random.c **** }
  44               		.loc 1 20 1 view .LVU6
  45 0018 0F90      		pop __tmp_reg__
  46 001a 0F90      		pop __tmp_reg__
  47 001c 0F90      		pop __tmp_reg__
  48               		.cfi_def_cfa_offset 2
  49               	/* epilogue start */
  50 001e 0895      		ret
  51               		.cfi_endproc
  52               	.LFE7:
  54               	.global	random_get
  56               	random_get:
  57               	.LFB8:
  21:random/random.c **** 
  22:random/random.c **** u32 random_get(void)
  23:random/random.c **** {
  58               		.loc 1 23 1 is_stmt 1 view -0
  59               		.cfi_startproc
  60 0020 CF93      		push r28
  61               		.cfi_def_cfa_offset 3
  62               		.cfi_offset 28, -2
  63 0022 DF93      		push r29
  64               		.cfi_def_cfa_offset 4
  65               		.cfi_offset 29, -3
  66 0024 00D0      		rcall .
  67 0026 00D0      		rcall .
  68               		.cfi_def_cfa_offset 8
  69 0028 CDB7      		in r28,__SP_L__
  70 002a DEB7      		in r29,__SP_H__
  71               		.cfi_def_cfa_register 28
  72               	/* prologue: function */
  73               	/* frame size = 4 */
  74               	/* stack size = 6 */
  75               	.L__stack_usage = 6
  24:random/random.c **** 	return rand();
  76               		.loc 1 24 2 view .LVU8
  77               		.loc 1 24 9 is_stmt 0 view .LVU9
  78 002c 0E94 0000 		call rand
  79               	.LVL3:
  80 0030 9C01      		movw r18,r24
  81 0032 990F      		lsl r25
  82 0034 440B      		sbc r20,r20
  83 0036 550B      		sbc r21,r21
  25:random/random.c **** }
  84               		.loc 1 25 1 view .LVU10
  85 0038 CA01      		movw r24,r20
  86 003a B901      		movw r22,r18
  87               	/* epilogue start */
  88 003c 0F90      		pop __tmp_reg__
  89 003e 0F90      		pop __tmp_reg__
  90 0040 0F90      		pop __tmp_reg__
  91 0042 0F90      		pop __tmp_reg__
  92 0044 DF91      		pop r29
  93 0046 CF91      		pop r28
  94 0048 0895      		ret
  95               		.cfi_endproc
  96               	.LFE8:
  98               		.section	.progmem.data,"a",@progbits
 101               	__c.0:
 102 0000 524E 4720 		.string	"RNG initialized"
 102      696E 6974 
 102      6961 6C69 
 102      7A65 6400 
 103               		.text
 104               	.Letext0:
 105               		.file 2 "/usr/lib/gcc/avr/12.2.0/include/stdint-gcc.h"
 106               		.file 3 "../../types/types.h"
 107               		.file 4 "logger/logger.h"
 108               		.file 5 "/usr/avr/include/stdlib.h"
 109               		.file 6 "adc/adc.h"
DEFINED SYMBOLS
                            *ABS*:00000000 random.c
     /tmp/cc97UwfX.s:2      *ABS*:0000003e __SP_H__
     /tmp/cc97UwfX.s:3      *ABS*:0000003d __SP_L__
     /tmp/cc97UwfX.s:4      *ABS*:0000003f __SREG__
     /tmp/cc97UwfX.s:5      *ABS*:00000000 __tmp_reg__
     /tmp/cc97UwfX.s:6      *ABS*:00000001 __zero_reg__
     /tmp/cc97UwfX.s:13     .text:00000000 random_init
     /tmp/cc97UwfX.s:16     .text:00000000 .Loc.0
     /tmp/cc97UwfX.s:17     .text:00000000 L0
     /tmp/cc97UwfX.s:22     .text:00000000 .Loc.1
     /tmp/cc97UwfX.s:28     .text:0000000a .Loc.2
     /tmp/cc97UwfX.s:30     .text:0000000a .Loc.3
     /tmp/cc97UwfX.s:31     .text:0000000a .Loc.4
     /tmp/cc97UwfX.s:33     .text:0000000a .Loc.5
     /tmp/cc97UwfX.s:101    .progmem.data:00000000 __c.0
     /tmp/cc97UwfX.s:44     .text:00000018 .Loc.6
     /tmp/cc97UwfX.s:51     .text:00000020 L0
     /tmp/cc97UwfX.s:56     .text:00000020 random_get
     /tmp/cc97UwfX.s:58     .text:00000020 .Loc.7
     /tmp/cc97UwfX.s:59     .text:00000020 L0
     /tmp/cc97UwfX.s:66     .text:00000026 L0
     /tmp/cc97UwfX.s:67     .text:00000028 L0
     /tmp/cc97UwfX.s:76     .text:0000002c .Loc.8
     /tmp/cc97UwfX.s:77     .text:0000002c .Loc.9
     /tmp/cc97UwfX.s:84     .text:00000038 .Loc.10
     /tmp/cc97UwfX.s:95     .text:0000004a L0
     /tmp/cc97UwfX.s:110    .text:0000004a L0
                     .debug_frame:00000000 L0
     /tmp/cc97UwfX.s:350    .debug_abbrev:00000000 .Ldebug_abbrev0
     /tmp/cc97UwfX.s:8      .text:00000000 .Ltext0
     /tmp/cc97UwfX.s:104    .text:0000004a .Letext0
     /tmp/cc97UwfX.s:710    .debug_line:00000000 .Ldebug_line0
     /tmp/cc97UwfX.s:57     .text:00000020 .LFB8
     /tmp/cc97UwfX.s:96     .text:0000004a .LFE8
     /tmp/cc97UwfX.s:79     .text:00000030 .LVL3
     /tmp/cc97UwfX.s:14     .text:00000000 .LFB7
     /tmp/cc97UwfX.s:52     .text:00000020 .LFE7
     /tmp/cc97UwfX.s:29     .text:0000000a .LBB2
     /tmp/cc97UwfX.s:32     .text:0000000a .LBE2
     /tmp/cc97UwfX.s:25     .text:00000006 .LVL0
     /tmp/cc97UwfX.s:27     .text:0000000a .LVL1
     /tmp/cc97UwfX.s:43     .text:00000018 .LVL2
     /tmp/cc97UwfX.s:111    .debug_info:00000000 .Ldebug_info0

UNDEFINED SYMBOLS
adc_read
srand
log_boot_P
rand
